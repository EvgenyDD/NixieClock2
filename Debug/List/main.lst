###############################################################################
#                                                                             #
# IAR C/C++ Compiler V6.10.1.50424 for Atmel AVR        19/Nov/2014  09:52:49 #
# Copyright 1996-2011 IAR Systems AB.                                         #
#                                                                             #
#    Source file  =  H:\WORKSPACE\NixieClock2\main.c                          #
#    Command line =  H:\WORKSPACE\NixieClock2\main.c --cpu=m16 -ms -o         #
#                    H:\WORKSPACE\NixieClock2\Debug\Obj\ -lC                  #
#                    H:\WORKSPACE\NixieClock2\Debug\List\                     #
#                    --initializers_in_flash --no_cse --no_inline             #
#                    --no_code_motion --no_cross_call --no_clustering         #
#                    --no_tbaa --debug -DENABLE_BIT_DEFINITIONS -e            #
#                    --eeprom_size 512 --clib -Ol                             #
#    List file    =  H:\WORKSPACE\NixieClock2\Debug\List\main.lst             #
#    Object file  =  H:\WORKSPACE\NixieClock2\Debug\Obj\main.r90              #
#                                                                             #
#                                                                             #
###############################################################################

H:\WORKSPACE\NixieClock2\main.c
      1          /* Includes ------------------------------------------------------------------*/
      2          #include <stdlib.h>
      3          
      4          #include "all.h"

   \                                 In  segment ABSOLUTE, at 0x5c
   \   union <unnamed> volatile __io _A_OCR0
   \                     _A_OCR0:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x5b
   \   union <unnamed> volatile __io _A_GICR
   \                     _A_GICR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x59
   \   union <unnamed> volatile __io _A_TIMSK
   \                     _A_TIMSK:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x55
   \   union <unnamed> volatile __io _A_MCUCR
   \                     _A_MCUCR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x53
   \   union <unnamed> volatile __io _A_TCCR0
   \                     _A_TCCR0:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x50
   \   union <unnamed> volatile __io _A_SFIOR
   \                     _A_SFIOR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x4f
   \   union <unnamed> volatile __io _A_TCCR1A
   \                     _A_TCCR1A:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x4e
   \   union <unnamed> volatile __io _A_TCCR1B
   \                     _A_TCCR1B:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x4a
   \   union <unnamed> volatile __io _A_OCR1A
   \                     _A_OCR1A:
   \   00000000                      DS8 2

   \                                 In  segment ABSOLUTE, at 0x48
   \   union <unnamed> volatile __io _A_OCR1B
   \                     _A_OCR1B:
   \   00000000                      DS8 2

   \                                 In  segment ABSOLUTE, at 0x45
   \   union <unnamed> volatile __io _A_TCCR2
   \                     _A_TCCR2:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x43
   \   union <unnamed> volatile __io _A_OCR2
   \                     _A_OCR2:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x3b
   \   union <unnamed> volatile __io _A_PORTA
   \                     _A_PORTA:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x3a
   \   union <unnamed> volatile __io _A_DDRA
   \                     _A_DDRA:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x38
   \   union <unnamed> volatile __io _A_PORTB
   \                     _A_PORTB:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x37
   \   union <unnamed> volatile __io _A_DDRB
   \                     _A_DDRB:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x36
   \   union <unnamed> volatile __io _A_PINB
   \                     _A_PINB:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x35
   \   union <unnamed> volatile __io _A_PORTC
   \                     _A_PORTC:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x34
   \   union <unnamed> volatile __io _A_DDRC
   \                     _A_DDRC:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x32
   \   union <unnamed> volatile __io _A_PORTD
   \                     _A_PORTD:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x31
   \   union <unnamed> volatile __io _A_DDRD
   \                     _A_DDRD:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x30
   \   union <unnamed> volatile __io _A_PIND
   \                     _A_PIND:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x27
   \   union <unnamed> volatile __io _A_ADMUX
   \                     _A_ADMUX:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x26
   \   union <unnamed> volatile __io _A_ADCSRA
   \                     _A_ADCSRA:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x24
   \   union <unnamed> volatile __io _A_ADC
   \                     _A_ADC:
   \   00000000                      DS8 2
      5          #include "ds1307.h"
      6          #include "backlight.h"
      7          #include "transient.h"
      8          
      9          
     10          /* Private typedef -----------------------------------------------------------*/
     11          /* Private define ------------------------------------------------------------*/
     12          enum {BTN_SET, BTN_MINUS, BTN_PLUS};
     13          

   \                                 In  segment NEAR_F, align 1, keep-with-next
     14          __flash uint8_t DayBright[25] = {1,21,42,63,84,105,126,147,168,189,
   \                     DayBright:
   \   00000000   15013F2A6954       DC8 1, 21, 42, 63, 84, 105, 126, 147, 168, 189, 210, 231, 245, 231, 210
   \              937EBDA8E7D2
   \              E7F5D2      
   \   0000000F   A8BD7E935469       DC8 189, 168, 147, 126, 105, 84, 63, 42, 21, 1
   \              2A3F0115    
     15                          210,231,245,231,210,189,168,147,126,105,84,63,42,21,1}; 

   \                                 In  segment NEAR_F, align 1, keep-with-next
     16          __flash uint8_t NightBright[25] = {105,116,127,138,149,162,175,186,198,210,
   \                     NightBright:
   \   00000000   74698A7FA295       DC8 105, 116, 127, 138, 149, 162, 175, 186, 198, 210, 222, 234, 245
   \              BAAFD2C6EADE
   \              F5          
   \   0000000D   DEEAC6D2AFBA       DC8 234, 222, 210, 198, 186, 175, 162, 149, 138, 127, 116, 105
   \              95A27F8A6974
     17                          222,234,245,234,222,210,198,186,175,162,149,138,127,116,105}; 
     18          

   \                                 In  segment NEAR_F, align 1, keep-with-next
     19          __flash uint8_t DC[4][22] = 
   \                     DC:
   \   00000000   000000000100       DC8 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0
   \              000100000101
   \              000100000000
   \              0000010000  
   \   00000017   000000010000       DC8 0, 0, 1, 0, 0, 0, 1, 1, 1, 0, 0, 0, 1, 1, 1, 0, 0, 0, 1, 0, 0, 1, 1
   \              010100010000
   \              010100010000
   \              0001010001  
   \   0000002E   000000000100       DC8 0, 0, 0, 0, 0, 1, 0, 1, 1, 0, 0, 1, 0, 1, 1, 1, 0, 0, 0, 1, 0, 1, 1
   \              010000010100
   \              010001010000
   \              0100010001  
   \   00000045   000101000000       DC8 1, 0, 0, 1, 0, 0, 1, 0, 1, 0, 1, 1, 0, 1, 0, 0, 0, 1, 0
   \              000100010101
   \              010000000100
   \              00          
     20          {
     21              {0,0,0,0,0,1,1,0,0,0,1, 1,1,0,0,0,0,0,0,0,0,1},
     22              {0,0,0,1,0,0,0,1,1,1,0, 0,0,1,1,1,0,0,0,1,0,0},
     23              {1,1,0,0,0,0,0,1,0,1,1, 0,0,1,0,1,1,1,0,0,0,1},
     24              {0,1,1,1,0,0,1,0,0,1,0, 1,0,1,1,0,1,0,0,0,1,0}
     25          };
     26          
     27          
     28          /* Private macro -------------------------------------------------------------*/
     29          #define DOTS_ON     PORTA_Bit5 = PORTC_Bit6 = 1;  
     30          #define DOTS_OFF    PORTA_Bit5 = PORTC_Bit6 = 0; 
     31          
     32          #define BUTTON_RESET(btn, debounce)     protectKeys[(btn)] = (debounce);\
     33                                                  BitReset(button, (btn));
     34          
     35          
     36          /* Private variables ---------------------------------------------------------*/

   \                                 In  segment EEPROM_N, align 1, keep-with-next
     37          __eeprom __no_init uint8_t eLEADZERO;   
   \                     eLEADZERO:
   \   00000000                      DS8 1

   \                                 In  segment EEPROM_N, align 1, keep-with-next
     38          __eeprom __no_init uint8_t eSEPARATOR;  
   \                     eSEPARATOR:
   \   00000000                      DS8 1

   \                                 In  segment EEPROM_N, align 1, keep-with-next
     39          __eeprom __no_init uint8_t eMIX_DELAY;  
   \                     eMIX_DELAY:
   \   00000000                      DS8 1

   \                                 In  segment EEPROM_N, align 1, keep-with-next
     40          __eeprom __no_init uint8_t eBL_MODE;    
   \                     eBL_MODE:
   \   00000000                      DS8 1
     41          

   \                                 In  segment NEAR_Z, align 1, keep-with-next
   \   00000000                      REQUIRE `?<Segment init: NEAR_Z>`
     42          volatile uint8_t settingsMode = 0, settingsFlag=0;  //setting mode active flag
   \                     settingsMode:
   \   00000000                      DS8 1

   \                                 In  segment NEAR_Z, align 1, keep-with-next
   \   00000000                      REQUIRE `?<Segment init: NEAR_Z>`
   \                     settingsFlag:
   \   00000000                      DS8 1

   \                                 In  segment NEAR_Z, align 1, keep-with-next
   \   00000000                      REQUIRE `?<Segment init: NEAR_Z>`
     43          volatile uint8_t Global1HzFlag = 0;
   \                     Global1HzFlag:
   \   00000000                      DS8 1

   \                                 In  segment NEAR_Z, align 1, keep-with-next
   \   00000000                      REQUIRE `?<Segment init: NEAR_Z>`
     44          volatile uint8_t outR[6], outG[6], outB[6]; //output BL values
   \                     outR:
   \   00000000                      DS8 6

   \                                 In  segment NEAR_Z, align 1, keep-with-next
   \   00000000                      REQUIRE `?<Segment init: NEAR_Z>`
   \                     outG:
   \   00000000                      DS8 6

   \                                 In  segment NEAR_Z, align 1, keep-with-next
   \   00000000                      REQUIRE `?<Segment init: NEAR_Z>`
   \                     outB:
   \   00000000                      DS8 6
     45              

   \                                 In  segment NEAR_Z, align 1, keep-with-next
   \   00000000                      REQUIRE `?<Segment init: NEAR_Z>`
     46          volatile uint8_t button;                    //buttons set flags  
   \                     button:
   \   00000000                      DS8 1

   \                                 In  segment NEAR_Z, align 1, keep-with-next
   \   00000000                      REQUIRE `?<Segment init: NEAR_Z>`
     47          volatile uint8_t protectKeys[3]={0,0,0};    //button debounce
   \                     protectKeys:
   \   00000000                      DS8 3
     48          

   \                                 In  segment NEAR_Z, align 1, keep-with-next
   \   00000000                      REQUIRE `?<Segment init: NEAR_Z>`
     49          volatile uint8_t counter = 0;             
   \                     counter:
   \   00000000                      DS8 1

   \                                 In  segment NEAR_Z, align 1, keep-with-next
   \   00000000                      REQUIRE `?<Segment init: NEAR_Z>`
     50          volatile uint8_t digit = 0;
   \                     digit:
   \   00000000                      DS8 1
     51          

   \                                 In  segment NEAR_Z, align 1, keep-with-next
   \   00000000                      REQUIRE `?<Segment init: NEAR_Z>`
     52          uint8_t hour, min, sec,  day, mon, year; 
   \                     hour:
   \   00000000                      DS8 1

   \                                 In  segment NEAR_Z, align 1, keep-with-next
   \   00000000                      REQUIRE `?<Segment init: NEAR_Z>`
   \                     min:
   \   00000000                      DS8 1

   \                                 In  segment NEAR_Z, align 1, keep-with-next
   \   00000000                      REQUIRE `?<Segment init: NEAR_Z>`
   \                     `sec`:
   \   00000000                      DS8 1

   \                                 In  segment NEAR_Z, align 1, keep-with-next
   \   00000000                      REQUIRE `?<Segment init: NEAR_Z>`
   \                     day:
   \   00000000                      DS8 1

   \                                 In  segment NEAR_Z, align 1, keep-with-next
   \   00000000                      REQUIRE `?<Segment init: NEAR_Z>`
   \                     mon:
   \   00000000                      DS8 1

   \                                 In  segment NEAR_Z, align 1, keep-with-next
   \   00000000                      REQUIRE `?<Segment init: NEAR_Z>`
   \                     year:
   \   00000000                      DS8 1
     53          
     54          //tube output values

   \                                 In  segment NEAR_I, align 1, keep-with-next
   \   00000000                      REQUIRE `?<Segment init: NEAR_I>`
     55          volatile uint8_t out[6] = {BLANK, BLANK, BLANK, BLANK, BLANK, BLANK};  
   \                     `out`:
   \   00000000                      DS8 6
   \   00000006                      REQUIRE `?<Initializer for out>`

   \                                 In  segment NEAR_Z, align 1, keep-with-next
   \   00000000                      REQUIRE `?<Segment init: NEAR_Z>`
     56          uint8_t targetOut[6];              //new output number
   \                     targetOut:
   \   00000000                      DS8 6
     57          

   \                                 In  segment NEAR_Z, align 1, keep-with-next
   \   00000000                      REQUIRE `?<Segment init: NEAR_Z>`
     58          volatile uint8_t changedDigit;  //flag->the digit is changed    
   \                     changedDigit:
   \   00000000                      DS8 1

   \                                 In  segment NEAR_Z, align 1, keep-with-next
   \   00000000                      REQUIRE `?<Segment init: NEAR_Z>`
     59          volatile uint8_t tranCounter=0; //counter to set bright levelel from Bright massives
   \                     tranCounter:
   \   00000000                      DS8 1
     60          

   \                                 In  segment NEAR_I, align 1, keep-with-next
   \   00000000                      REQUIRE `?<Segment init: NEAR_I>`
     61          uint8_t level[6] = {1};  
   \                     level:
   \   00000000                      DS8 6
   \   00000006                      REQUIRE `?<Initializer for level>`
     62          
     63          
     64          
     65          /* Extern variables ----------------------------------------------------------*/
     66          extern struct SmoothType smooth[SMOOTH_NUM_CHANNELS];
     67          extern uint8_t BLType;
     68          
     69          
     70          /* Private function prototypes -----------------------------------------------*/
     71          /* Private functions ---------------------------------------------------------*/
     72          /*******************************************************************************
     73          * Function Name  : RandomGet
     74          * Description    : Generate 4-digit random number in range [400;600]
     75          *******************************************************************************/

   \                                 In  segment CODE, align 2, keep-with-next
     76          uint16_t RandomGet()
   \                     RandomGet:
     77          {
   \   00000000   939A               ST      -Y, R25
   \   00000002   938A               ST      -Y, R24
     78              uint16_t temp = ADCL;
   \   00000004   B184               IN      R24, 0x04
   \   00000006   E090               LDI     R25, 0
     79              temp |= (ADCH << 8);
   \   00000008   B115               IN      R17, 0x05
   \   0000000A   E000               LDI     R16, 0
   \   0000000C   2B80               OR      R24, R16
   \   0000000E   2B91               OR      R25, R17
     80              ADCSRA |= (1<<ADSC); //enable ADC interrupt
   \   00000010   9A36               SBI     0x06, 0x06
     81              
     82              return temp+rand(); 
   \   00000012   ........           CALL    rand
   \   00000016   0F80               ADD     R24, R16
   \   00000018   1F91               ADC     R25, R17
   \   0000001A   018C               MOVW    R17:R16, R25:R24
   \   0000001C   9189               LD      R24, Y+
   \   0000001E   9199               LD      R25, Y+
   \   00000020   9508               RET
   \   00000022                      REQUIRE _A_ADC
   \   00000022                      REQUIRE _A_ADCSRA
     83          }
     84          
     85          
     86          /*******************************************************************************
     87          * Function Name  : RandomGet4
     88          * Description    : Generate 4-digit random number
     89          * Return         : 4-digit random number
     90          *******************************************************************************/

   \                                 In  segment CODE, align 2, keep-with-next
     91          uint16_t RandomGet4()
   \                     RandomGet4:
     92          {
   \   00000000   939A               ST      -Y, R25
   \   00000002   938A               ST      -Y, R24
     93              uint16_t a = ADCL;
   \   00000004   B144               IN      R20, 0x04
   \   00000006   E050               LDI     R21, 0
     94              a |= (ADCH << 8);
   \   00000008   B115               IN      R17, 0x05
   \   0000000A   E000               LDI     R16, 0
   \   0000000C   2B40               OR      R20, R16
   \   0000000E   2B51               OR      R21, R17
     95              ADCSRA |= (1<<ADSC); //enable ADC interrupt
   \   00000010   9A36               SBI     0x06, 0x06
     96              while(BitIsReset(ADCSRA, ADIF));
   \                     ??RandomGet4_0:
   \   00000012   9B34               SBIS    0x06, 0x04
   \   00000014   CFFE               RJMP    ??RandomGet4_0
     97              
     98              uint16_t b = ADCL;
   \   00000016   B024               IN      R2, 0x04
   \   00000018   2433               CLR     R3
     99              b |= (ADCH << 8);
   \   0000001A   B115               IN      R17, 0x05
   \   0000001C   E000               LDI     R16, 0
   \   0000001E   2A20               OR      R2, R16
   \   00000020   2A31               OR      R3, R17
    100              ADCSRA |= (1<<ADSC); //enable ADC interrupt
   \   00000022   9A36               SBI     0x06, 0x06
    101              while(BitIsReset(ADCSRA, ADIF));
   \                     ??RandomGet4_1:
   \   00000024   9B34               SBIS    0x06, 0x04
   \   00000026   CFFE               RJMP    ??RandomGet4_1
    102              
    103              uint16_t c = ADCL;
   \   00000028   B164               IN      R22, 0x04
   \   0000002A   E070               LDI     R23, 0
    104              c |= (ADCH << 8);
   \   0000002C   B115               IN      R17, 0x05
   \   0000002E   E000               LDI     R16, 0
   \   00000030   2B60               OR      R22, R16
   \   00000032   2B71               OR      R23, R17
    105              ADCSRA |= (1<<ADSC); //enable ADC interrupt
   \   00000034   9A36               SBI     0x06, 0x06
    106              while(BitIsReset(ADCSRA, ADIF));
   \                     ??RandomGet4_2:
   \   00000036   9B34               SBIS    0x06, 0x04
   \   00000038   CFFE               RJMP    ??RandomGet4_2
    107              
    108              uint16_t D = ADCL;
   \   0000003A   B1E4               IN      R30, 0x04
   \   0000003C   E0F0               LDI     R31, 0
    109              D |= (ADCH << 8);
   \   0000003E   B115               IN      R17, 0x05
   \   00000040   E000               LDI     R16, 0
   \   00000042   2BE0               OR      R30, R16
   \   00000044   2BF1               OR      R31, R17
    110              ADCSRA |= (1<<ADSC); //enable ADC interrupt
   \   00000046   9A36               SBI     0x06, 0x06
    111              while(BitIsReset(ADCSRA, ADIF));
   \                     ??RandomGet4_3:
   \   00000048   9B34               SBIS    0x06, 0x04
   \   0000004A   CFFE               RJMP    ??RandomGet4_3
    112              
    113              return (uint16_t)(a*1000+b*100+c*10+D+rand()); 
   \   0000004C   EE08               LDI     R16, 232
   \   0000004E   E013               LDI     R17, 3
   \   00000050   ........           CALL    ?S_EC_MUL_L02
   \   00000054   0198               MOVW    R19:R18, R17:R16
   \   00000056   E604               LDI     R16, 100
   \   00000058   E010               LDI     R17, 0
   \   0000005A   01A1               MOVW    R21:R20, R3:R2
   \   0000005C   ........           CALL    ?S_EC_MUL_L02
   \   00000060   0F20               ADD     R18, R16
   \   00000062   1F31               ADC     R19, R17
   \   00000064   E00A               LDI     R16, 10
   \   00000066   E010               LDI     R17, 0
   \   00000068   01AB               MOVW    R21:R20, R23:R22
   \   0000006A   ........           CALL    ?S_EC_MUL_L02
   \   0000006E   0F20               ADD     R18, R16
   \   00000070   1F31               ADC     R19, R17
   \   00000072   0F2E               ADD     R18, R30
   \   00000074   1F3F               ADC     R19, R31
   \   00000076   01C9               MOVW    R25:R24, R19:R18
   \   00000078   ........           CALL    rand
   \   0000007C   0F80               ADD     R24, R16
   \   0000007E   1F91               ADC     R25, R17
   \   00000080   018C               MOVW    R17:R16, R25:R24
   \   00000082   9189               LD      R24, Y+
   \   00000084   9199               LD      R25, Y+
   \   00000086   9508               RET
   \   00000088                      REQUIRE _A_ADC
   \   00000088                      REQUIRE _A_ADCSRA
    114          }
    115          
    116          
    117          /*******************************************************************************
    118          * Function Name  : Initialization
    119          * Description    : Initialize thw peripheral
    120          *******************************************************************************/

   \                                 In  segment CODE, align 2, keep-with-next
    121          void Initialization()
   \                     Initialization:
    122          {
    123          //I/O init
    124              DDRA = 0xEF; 
   \   00000000   EE0F               LDI     R16, 239
   \   00000002   BB0A               OUT     0x1A, R16
    125              DDRB = 0x0B;  
   \   00000004   E00B               LDI     R16, 11
   \   00000006   BB07               OUT     0x17, R16
    126              DDRC = 0xFF;  
   \   00000008   EF0F               LDI     R16, 255
   \   0000000A   BB04               OUT     0x14, R16
    127              DDRD = 0x7B;
   \   0000000C   E70B               LDI     R16, 123
   \   0000000E   BB01               OUT     0x11, R16
    128          
    129              PORTD = 0x04;
   \   00000010   E004               LDI     R16, 4
   \   00000012   BB02               OUT     0x12, R16
    130              
    131          //ADC Init for Random - PA4
    132              ADMUX = (1<<REFS0)|(1<<MUX2)|(0<<MUX1)|(0<<MUX0);               
   \   00000014   E404               LDI     R16, 68
   \   00000016   B907               OUT     0x07, R16
    133              ADCSRA = (1<<ADEN)|(1<<ADPS2)|(1<<ADPS1)|(1<<ADPS0);       
   \   00000018   E807               LDI     R16, 135
   \   0000001A   B906               OUT     0x06, R16
    134              SFIOR = 0;    
   \   0000001C   E000               LDI     R16, 0
   \   0000001E   BF00               OUT     0x30, R16
    135                 
    136          //Timers 1,2 for PWM
    137              TCCR0  |= (1<<WGM00)|(1<<WGM01)|(0<<COM00)|(1<<COM01)|(1<<CS00);
   \   00000020   B703               IN      R16, 0x33
   \   00000022   6609               ORI     R16, 0x69
   \   00000024   BF03               OUT     0x33, R16
    138              TCCR1A |= (1<<COM1A1)|(1<<COM1B1)|(0<<COM1A0)|(0<<COM1B0)|(1<<WGM10)|(0<<WGM11);
   \   00000026   B50F               IN      R16, 0x2F
   \   00000028   6A01               ORI     R16, 0xA1
   \   0000002A   BD0F               OUT     0x2F, R16
    139              TCCR1B |= (1<<WGM12)|(0<<WGM13)|(0<<CS12)|(0<<CS11)|(1<<CS10);   
   \   0000002C   B50E               IN      R16, 0x2E
   \   0000002E   6009               ORI     R16, 0x09
   \   00000030   BD0E               OUT     0x2E, R16
    140                 
    141          //Timer 2 for interrupts
    142              TCCR2 |= (1<<CS20)|(1<<CS21);
   \   00000032   B505               IN      R16, 0x25
   \   00000034   6003               ORI     R16, 0x03
   \   00000036   BD05               OUT     0x25, R16
    143              TIMSK |= (1<<OCIE2)|(1<<TOIE2);    
   \   00000038   B709               IN      R16, 0x39
   \   0000003A   6C00               ORI     R16, 0xC0
   \   0000003C   BF09               OUT     0x39, R16
    144              
    145              MCUCR = (1<<ISC01) | (1<<ISC00);   
   \   0000003E   E003               LDI     R16, 3
   \   00000040   BF05               OUT     0x35, R16
    146              GICR = (1<<INT0);           
   \   00000042   E400               LDI     R16, 64
   \   00000044   BF0B               OUT     0x3B, R16
    147              
    148          //RTC Init
    149              DS1307Init();    
   \   00000046   ........           CALL    DS1307Init
    150            
    151              srand(RandomGet4());
   \   0000004A   ....               RCALL   RandomGet4
   \   0000004C   ........           CALL    srand
    152                
    153              if(eLEADZERO > 1) eLEADZERO = 0;
   \   00000050   ....               LDI     R20, LOW(eLEADZERO)
   \   00000052   ....               LDI     R21, (eLEADZERO) >> 8
   \   00000054   ........           CALL    __eeget8_16
   \   00000058   3002               CPI     R16, 2
   \   0000005A   F028               BRCS    ??Initialization_0
   \   0000005C   E000               LDI     R16, 0
   \   0000005E   ....               LDI     R20, LOW(eLEADZERO)
   \   00000060   ....               LDI     R21, (eLEADZERO) >> 8
   \   00000062   ........           CALL    __eeput8_16
    154              if(eSEPARATOR > 1) eSEPARATOR = 0;
   \                     ??Initialization_0:
   \   00000066   ....               LDI     R20, LOW(eSEPARATOR)
   \   00000068   ....               LDI     R21, (eSEPARATOR) >> 8
   \   0000006A   ........           CALL    __eeget8_16
   \   0000006E   3002               CPI     R16, 2
   \   00000070   F028               BRCS    ??Initialization_1
   \   00000072   E000               LDI     R16, 0
   \   00000074   ....               LDI     R20, LOW(eSEPARATOR)
   \   00000076   ....               LDI     R21, (eSEPARATOR) >> 8
   \   00000078   ........           CALL    __eeput8_16
    155              if(eMIX_DELAY > 99) eMIX_DELAY = 10;  
   \                     ??Initialization_1:
   \   0000007C   ....               LDI     R20, LOW(eMIX_DELAY)
   \   0000007E   ....               LDI     R21, (eMIX_DELAY) >> 8
   \   00000080   ........           CALL    __eeget8_16
   \   00000084   3604               CPI     R16, 100
   \   00000086   F028               BRCS    ??Initialization_2
   \   00000088   E00A               LDI     R16, 10
   \   0000008A   ....               LDI     R20, LOW(eMIX_DELAY)
   \   0000008C   ....               LDI     R21, (eMIX_DELAY) >> 8
   \   0000008E   ........           CALL    __eeput8_16
    156              if(eBL_MODE > 5) eBL_MODE = 0;  
   \                     ??Initialization_2:
   \   00000092   ....               LDI     R20, LOW(eBL_MODE)
   \   00000094   ....               LDI     R21, (eBL_MODE) >> 8
   \   00000096   ........           CALL    __eeget8_16
   \   0000009A   3006               CPI     R16, 6
   \   0000009C   F028               BRCS    ??Initialization_3
   \   0000009E   E000               LDI     R16, 0
   \   000000A0   ....               LDI     R20, LOW(eBL_MODE)
   \   000000A2   ....               LDI     R21, (eBL_MODE) >> 8
   \   000000A4   ........           CALL    __eeput8_16
    157              BLType = eBL_MODE;
   \                     ??Initialization_3:
   \   000000A8   ....               LDI     R20, LOW(eBL_MODE)
   \   000000AA   ....               LDI     R21, (eBL_MODE) >> 8
   \   000000AC   ........           CALL    __eeget8_16
   \   000000B0   9300....           STS     BLType, R16
    158            
    159          //Check clock
    160              DS1307GetDate(&day, &mon, &year); 
   \   000000B4   ....               LDI     R20, LOW(year)
   \   000000B6   ....               LDI     R21, (year) >> 8
   \   000000B8   ....               LDI     R18, LOW(mon)
   \   000000BA   ....               LDI     R19, (mon) >> 8
   \   000000BC   ....               LDI     R16, LOW(day)
   \   000000BE   ....               LDI     R17, (day) >> 8
   \   000000C0   ........           CALL    DS1307GetDate
    161              DS1307GetTime(&hour, &min, &sec);  
   \   000000C4   ....               LDI     R20, LOW(`sec`)
   \   000000C6   ....               LDI     R21, (`sec`) >> 8
   \   000000C8   ....               LDI     R18, LOW(min)
   \   000000CA   ....               LDI     R19, (min) >> 8
   \   000000CC   ....               LDI     R16, LOW(hour)
   \   000000CE   ....               LDI     R17, (hour) >> 8
   \   000000D0   ........           CALL    DS1307GetTime
    162              
    163              uint8_t tempFlag=0;
   \   000000D4   E000               LDI     R16, 0
    164              if(day>31) {day = 1; tempFlag++;}
   \   000000D6   9110....           LDS     R17, day
   \   000000DA   3210               CPI     R17, 32
   \   000000DC   F020               BRCS    ??Initialization_4
   \   000000DE   E011               LDI     R17, 1
   \   000000E0   9310....           STS     day, R17
   \   000000E4   9503               INC     R16
    165              if(mon>12) {mon = 1; tempFlag++;}
   \                     ??Initialization_4:
   \   000000E6   9110....           LDS     R17, mon
   \   000000EA   301D               CPI     R17, 13
   \   000000EC   F020               BRCS    ??Initialization_5
   \   000000EE   E011               LDI     R17, 1
   \   000000F0   9310....           STS     mon, R17
   \   000000F4   9503               INC     R16
    166              if(year>99) {year = 0; tempFlag++;}
   \                     ??Initialization_5:
   \   000000F6   9110....           LDS     R17, year
   \   000000FA   3614               CPI     R17, 100
   \   000000FC   F020               BRCS    ??Initialization_6
   \   000000FE   E010               LDI     R17, 0
   \   00000100   9310....           STS     year, R17
   \   00000104   9503               INC     R16
    167              if(tempFlag) DS1307SetDate(day, mon, year);
   \                     ??Initialization_6:
   \   00000106   2300               TST     R16
   \   00000108   F041               BREQ    ??Initialization_7
   \   0000010A   9120....           LDS     R18, year
   \   0000010E   9110....           LDS     R17, mon
   \   00000112   9100....           LDS     R16, day
   \   00000116   ........           CALL    DS1307SetDate
    168              tempFlag = 0;
   \                     ??Initialization_7:
   \   0000011A   E000               LDI     R16, 0
    169              
    170              if(hour>24) {hour = 0; tempFlag++;} 
   \   0000011C   9110....           LDS     R17, hour
   \   00000120   3119               CPI     R17, 25
   \   00000122   F020               BRCS    ??Initialization_8
   \   00000124   E010               LDI     R17, 0
   \   00000126   9310....           STS     hour, R17
   \   0000012A   9503               INC     R16
    171              if(min>59) {min = 0; tempFlag++;}
   \                     ??Initialization_8:
   \   0000012C   9110....           LDS     R17, min
   \   00000130   331C               CPI     R17, 60
   \   00000132   F020               BRCS    ??Initialization_9
   \   00000134   E010               LDI     R17, 0
   \   00000136   9310....           STS     min, R17
   \   0000013A   9503               INC     R16
    172              if(sec>59) {sec = 0; tempFlag++;}
   \                     ??Initialization_9:
   \   0000013C   9110....           LDS     R17, `sec`
   \   00000140   331C               CPI     R17, 60
   \   00000142   F020               BRCS    ??Initialization_10
   \   00000144   E010               LDI     R17, 0
   \   00000146   9310....           STS     `sec`, R17
   \   0000014A   9503               INC     R16
    173              if(tempFlag) DS1307SetTime(hour, min, sec);
   \                     ??Initialization_10:
   \   0000014C   2300               TST     R16
   \   0000014E   F041               BREQ    ??Initialization_11
   \   00000150   9120....           LDS     R18, `sec`
   \   00000154   9110....           LDS     R17, min
   \   00000158   9100....           LDS     R16, hour
   \   0000015C   ........           CALL    DS1307SetTime
    174            
    175              ZeroBL();        
   \                     ??Initialization_11:
   \   00000160   ........           CALL    ZeroBL
    176              _delay_ms(200);
   \   00000164   EF0F               LDI     R16, 255
   \   00000166   E314               LDI     R17, 52
   \   00000168   E02C               LDI     R18, 12
   \   0000016A   5001               SUBI    R16, 1
   \   0000016C   4010               SBCI    R17, 0
   \   0000016E   4020               SBCI    R18, 0
   \   00000170   F7E1               BRNE    $-6
   \   00000172   C000               RJMP    $+2
   \   00000174   0000               NOP
    177              
    178              __enable_interrupt();
   \   00000176   9478               SEI
    179          }
   \   00000178   9508               RET
   \   0000017A                      REQUIRE _A_DDRA
   \   0000017A                      REQUIRE _A_DDRB
   \   0000017A                      REQUIRE _A_DDRC
   \   0000017A                      REQUIRE _A_DDRD
   \   0000017A                      REQUIRE _A_PORTD
   \   0000017A                      REQUIRE _A_ADMUX
   \   0000017A                      REQUIRE _A_ADCSRA
   \   0000017A                      REQUIRE _A_SFIOR
   \   0000017A                      REQUIRE _A_TCCR0
   \   0000017A                      REQUIRE _A_TCCR1A
   \   0000017A                      REQUIRE _A_TCCR1B
   \   0000017A                      REQUIRE _A_TCCR2
   \   0000017A                      REQUIRE _A_TIMSK
   \   0000017A                      REQUIRE _A_MCUCR
   \   0000017A                      REQUIRE _A_GICR
    180          
    181          
    182          /*******************************************************************************
    183          * Function Name  : GetDate.
    184          * Description    : Get date from DS1307 and display it 1.5 sec
    185          *******************************************************************************/

   \                                 In  segment CODE, align 2, keep-with-next
    186          void GetDate()
   \                     GetDate:
    187          {    
    188              DOTS_OFF;    
   \   00000000   98AE               CBI     0x15, 0x06
   \   00000002   98DD               CBI     0x1B, 0x05
    189              ZeroBL();
   \   00000004   ........           CALL    ZeroBL
    190              
    191              DS1307GetDate(&day, &mon, &year);
   \   00000008   ....               LDI     R20, LOW(year)
   \   0000000A   ....               LDI     R21, (year) >> 8
   \   0000000C   ....               LDI     R18, LOW(mon)
   \   0000000E   ....               LDI     R19, (mon) >> 8
   \   00000010   ....               LDI     R16, LOW(day)
   \   00000012   ....               LDI     R17, (day) >> 8
   \   00000014   ........           CALL    DS1307GetDate
    192              
    193              for(uint8_t i=0; i<6; i++) level[i] = 10;   
   \   00000018   E000               LDI     R16, 0
   \   0000001A   C007               RJMP    ??GetDate_0
   \                     ??GetDate_1:
   \   0000001C   E02A               LDI     R18, 10
   \   0000001E   E010               LDI     R17, 0
   \   00000020   01F8               MOVW    R31:R30, R17:R16
   \   00000022   ....               SUBI    R30, LOW((-(level) & 0xFFFF))
   \   00000024   ....               SBCI    R31, (-(level) & 0xFFFF) >> 8
   \   00000026   8320               ST      Z, R18
   \   00000028   9503               INC     R16
   \                     ??GetDate_0:
   \   0000002A   3006               CPI     R16, 6
   \   0000002C   F3B8               BRCS    ??GetDate_1
    194              Sprint(day, mon, year); 
   \   0000002E   9120....           LDS     R18, year
   \   00000032   9110....           LDS     R17, mon
   \   00000036   9100....           LDS     R16, day
   \   0000003A   ........           CALL    Sprint
    195              
    196              _delay_ms(1500);
   \   0000003E   E70F               LDI     R16, 127
   \   00000040   E81D               LDI     R17, 141
   \   00000042   E52B               LDI     R18, 91
   \   00000044   5001               SUBI    R16, 1
   \   00000046   4010               SBCI    R17, 0
   \   00000048   4020               SBCI    R18, 0
   \   0000004A   F7E1               BRNE    $-6
   \   0000004C   C000               RJMP    $+2
   \   0000004E   0000               NOP
    197          }
   \   00000050   9508               RET
   \   00000052                      REQUIRE _A_PORTA
   \   00000052                      REQUIRE _A_PORTC
    198          
    199          
    200          /*******************************************************************************
    201          * Function Name  : Settings
    202          * Description    : Settings Mode Handler
    203          *******************************************************************************/

   \                                 In  segment CODE, align 2, keep-with-next
    204          void Settings()
   \                     Settings:
    205          { 
    206              /* settingsMode:
    207              * 1: hours
    208              * 2: minutes
    209              * 3: seconds
    210              *
    211              * 4: day
    212              * 5: month
    213              * 6: year
    214              *
    215              * 7: leading zero
    216              * 8: dots
    217              * 9: main backlight type
    218              * 10: mix mode change time
    219              */
    220          
    221              if(SQW_IN)
   \   00000000   9B82               SBIS    0x10, 0x02
   \   00000002   C09C               RJMP    ??Settings_0
    222              {
    223                  switch(settingsMode)
   \   00000004   9100....           LDS     R16, settingsMode
   \   00000008   ....               LDI     R30, LOW(`?<Jumptable for Settings>_0`)
   \   0000000A   ....               LDI     R31, (`?<Jumptable for Settings>_0`) >> 8
   \   0000000C   ........           JMP     ?CV_SWITCH_L06
    224                  {
    225                      case 1: out[0] = hour/10; 
   \                     ??Settings_1:
   \   00000010   E04A               LDI     R20, 10
   \   00000012   9100....           LDS     R16, hour
   \   00000016   ........           CALL    ?UC_DIVMOD_L01
   \   0000001A   9300....           STS     `out`, R16
    226                              out[1] = hour%10;
   \   0000001E   E04A               LDI     R20, 10
   \   00000020   9100....           LDS     R16, hour
   \   00000024   ........           CALL    ?UC_DIVMOD_L01
   \   00000028   9340....           STS     (`out` + 1), R20
    227                          break;
   \   0000002C   C0C4               RJMP    ??Settings_2
    228                      case 2: out[2] = min/10; 
   \                     ??Settings_3:
   \   0000002E   E04A               LDI     R20, 10
   \   00000030   9100....           LDS     R16, min
   \   00000034   ........           CALL    ?UC_DIVMOD_L01
   \   00000038   9300....           STS     (`out` + 2), R16
    229                              out[3] = min%10;    
   \   0000003C   E04A               LDI     R20, 10
   \   0000003E   9100....           LDS     R16, min
   \   00000042   ........           CALL    ?UC_DIVMOD_L01
   \   00000046   9340....           STS     (`out` + 3), R20
    230                          break;
   \   0000004A   C0B5               RJMP    ??Settings_2
    231                      case 3: out[4] = sec/10; 
   \                     ??Settings_4:
   \   0000004C   E04A               LDI     R20, 10
   \   0000004E   9100....           LDS     R16, `sec`
   \   00000052   ........           CALL    ?UC_DIVMOD_L01
   \   00000056   9300....           STS     (`out` + 4), R16
    232                              out[5] = sec%10;
   \   0000005A   E04A               LDI     R20, 10
   \   0000005C   9100....           LDS     R16, `sec`
   \   00000060   ........           CALL    ?UC_DIVMOD_L01
   \   00000064   9340....           STS     (`out` + 5), R20
    233                          break;
   \   00000068   C0A6               RJMP    ??Settings_2
    234                      case 4: out[0] = day/10; 
   \                     ??Settings_5:
   \   0000006A   E04A               LDI     R20, 10
   \   0000006C   9100....           LDS     R16, day
   \   00000070   ........           CALL    ?UC_DIVMOD_L01
   \   00000074   9300....           STS     `out`, R16
    235                              out[1] = day%10;
   \   00000078   E04A               LDI     R20, 10
   \   0000007A   9100....           LDS     R16, day
   \   0000007E   ........           CALL    ?UC_DIVMOD_L01
   \   00000082   9340....           STS     (`out` + 1), R20
    236                          break;  
   \   00000086   C097               RJMP    ??Settings_2
    237                      case 5: out[2] = mon/10; 
   \                     ??Settings_6:
   \   00000088   E04A               LDI     R20, 10
   \   0000008A   9100....           LDS     R16, mon
   \   0000008E   ........           CALL    ?UC_DIVMOD_L01
   \   00000092   9300....           STS     (`out` + 2), R16
    238                              out[3] = mon%10; 
   \   00000096   E04A               LDI     R20, 10
   \   00000098   9100....           LDS     R16, mon
   \   0000009C   ........           CALL    ?UC_DIVMOD_L01
   \   000000A0   9340....           STS     (`out` + 3), R20
    239                          break;
   \   000000A4   C088               RJMP    ??Settings_2
    240                      case 6: out[4] = year/10; 
   \                     ??Settings_7:
   \   000000A6   E04A               LDI     R20, 10
   \   000000A8   9100....           LDS     R16, year
   \   000000AC   ........           CALL    ?UC_DIVMOD_L01
   \   000000B0   9300....           STS     (`out` + 4), R16
    241                              out[5] = year%10; 
   \   000000B4   E04A               LDI     R20, 10
   \   000000B6   9100....           LDS     R16, year
   \   000000BA   ........           CALL    ?UC_DIVMOD_L01
   \   000000BE   9340....           STS     (`out` + 5), R20
    242                          break;
   \   000000C2   C079               RJMP    ??Settings_2
    243                      case 7: out[0] = eLEADZERO;
   \                     ??Settings_8:
   \   000000C4   ....               LDI     R20, LOW(eLEADZERO)
   \   000000C6   ....               LDI     R21, (eLEADZERO) >> 8
   \   000000C8   ........           CALL    __eeget8_16
   \   000000CC   9300....           STS     `out`, R16
    244                          break;
   \   000000D0   C072               RJMP    ??Settings_2
    245                      case 8: out[1] = eSEPARATOR; 
   \                     ??Settings_9:
   \   000000D2   ....               LDI     R20, LOW(eSEPARATOR)
   \   000000D4   ....               LDI     R21, (eSEPARATOR) >> 8
   \   000000D6   ........           CALL    __eeget8_16
   \   000000DA   9300....           STS     (`out` + 1), R16
    246                          break;
   \   000000DE   C06B               RJMP    ??Settings_2
    247                      case 9: out[2] = eBL_MODE/10; 
   \                     ??Settings_10:
   \   000000E0   E04A               LDI     R20, 10
   \   000000E2   2F14               MOV     R17, R20
   \   000000E4   ....               LDI     R20, LOW(eBL_MODE)
   \   000000E6   ....               LDI     R21, (eBL_MODE) >> 8
   \   000000E8   ........           CALL    __eeget8_16
   \   000000EC   2F41               MOV     R20, R17
   \   000000EE   ........           CALL    ?UC_DIVMOD_L01
   \   000000F2   9300....           STS     (`out` + 2), R16
    248                              out[3] = eBL_MODE%10;
   \   000000F6   E04A               LDI     R20, 10
   \   000000F8   2F14               MOV     R17, R20
   \   000000FA   ....               LDI     R20, LOW(eBL_MODE)
   \   000000FC   ....               LDI     R21, (eBL_MODE) >> 8
   \   000000FE   ........           CALL    __eeget8_16
   \   00000102   2F41               MOV     R20, R17
   \   00000104   ........           CALL    ?UC_DIVMOD_L01
   \   00000108   9340....           STS     (`out` + 3), R20
    249                          break;
   \   0000010C   C054               RJMP    ??Settings_2
    250                      case 10:out[4] = eMIX_DELAY/10; 
   \                     ??Settings_11:
   \   0000010E   E04A               LDI     R20, 10
   \   00000110   2F14               MOV     R17, R20
   \   00000112   ....               LDI     R20, LOW(eMIX_DELAY)
   \   00000114   ....               LDI     R21, (eMIX_DELAY) >> 8
   \   00000116   ........           CALL    __eeget8_16
   \   0000011A   2F41               MOV     R20, R17
   \   0000011C   ........           CALL    ?UC_DIVMOD_L01
   \   00000120   9300....           STS     (`out` + 4), R16
    251                              out[5] = eMIX_DELAY%10;    
   \   00000124   E04A               LDI     R20, 10
   \   00000126   2F14               MOV     R17, R20
   \   00000128   ....               LDI     R20, LOW(eMIX_DELAY)
   \   0000012A   ....               LDI     R21, (eMIX_DELAY) >> 8
   \   0000012C   ........           CALL    __eeget8_16
   \   00000130   2F41               MOV     R20, R17
   \   00000132   ........           CALL    ?UC_DIVMOD_L01
   \   00000136   9340....           STS     (`out` + 5), R20
    252                          break;
   \   0000013A   C03D               RJMP    ??Settings_2
    253                  }  
    254              }
    255              else
    256              {
    257                  switch(settingsMode)
   \                     ??Settings_0:
   \   0000013C   9100....           LDS     R16, settingsMode
   \   00000140   ....               LDI     R30, LOW(`?<Jumptable for Settings>_1`)
   \   00000142   ....               LDI     R31, (`?<Jumptable for Settings>_1`) >> 8
   \   00000144   ........           JMP     ?CV_SWITCH_L06
    258                  {
    259                      case 1: out[0] = out[1] = BLANK; 
   \                     ??Settings_12:
   \   00000148   E00A               LDI     R16, 10
   \   0000014A   9300....           STS     (`out` + 1), R16
   \   0000014E   9300....           STS     `out`, R16
    260                          break;
   \   00000152   C031               RJMP    ??Settings_2
    261                      case 2: out[2] = out[3] = BLANK; 
   \                     ??Settings_13:
   \   00000154   E00A               LDI     R16, 10
   \   00000156   9300....           STS     (`out` + 3), R16
   \   0000015A   9300....           STS     (`out` + 2), R16
    262                          break;
   \   0000015E   C02B               RJMP    ??Settings_2
    263                      case 3: out[4] = out[5] = BLANK;
   \                     ??Settings_14:
   \   00000160   E00A               LDI     R16, 10
   \   00000162   9300....           STS     (`out` + 5), R16
   \   00000166   9300....           STS     (`out` + 4), R16
    264                          break;
   \   0000016A   C025               RJMP    ??Settings_2
    265                      case 4: out[0] = out[1] = BLANK;
   \                     ??Settings_15:
   \   0000016C   E00A               LDI     R16, 10
   \   0000016E   9300....           STS     (`out` + 1), R16
   \   00000172   9300....           STS     `out`, R16
    266                          break;  
   \   00000176   C01F               RJMP    ??Settings_2
    267                      case 5: out[2] = out[3] = BLANK;      
   \                     ??Settings_16:
   \   00000178   E00A               LDI     R16, 10
   \   0000017A   9300....           STS     (`out` + 3), R16
   \   0000017E   9300....           STS     (`out` + 2), R16
    268                          break;
   \   00000182   C019               RJMP    ??Settings_2
    269                      case 6: out[4] = out[5] = BLANK;
   \                     ??Settings_17:
   \   00000184   E00A               LDI     R16, 10
   \   00000186   9300....           STS     (`out` + 5), R16
   \   0000018A   9300....           STS     (`out` + 4), R16
    270                          break;
   \   0000018E   C013               RJMP    ??Settings_2
    271                      case 7: out[0] = BLANK; 
   \                     ??Settings_18:
   \   00000190   E00A               LDI     R16, 10
   \   00000192   9300....           STS     `out`, R16
    272                          break;
   \   00000196   C00F               RJMP    ??Settings_2
    273                      case 8: out[1] = BLANK;    
   \                     ??Settings_19:
   \   00000198   E00A               LDI     R16, 10
   \   0000019A   9300....           STS     (`out` + 1), R16
    274                          break;
   \   0000019E   C00B               RJMP    ??Settings_2
    275                      case 9: out[2] = out[3] = BLANK; 
   \                     ??Settings_20:
   \   000001A0   E00A               LDI     R16, 10
   \   000001A2   9300....           STS     (`out` + 3), R16
   \   000001A6   9300....           STS     (`out` + 2), R16
    276                          break;
   \   000001AA   C005               RJMP    ??Settings_2
    277                      case 10:out[4] = out[5] = BLANK;
   \                     ??Settings_21:
   \   000001AC   E00A               LDI     R16, 10
   \   000001AE   9300....           STS     (`out` + 5), R16
   \   000001B2   9300....           STS     (`out` + 4), R16
    278                          break;
    279                  }
    280              }
    281          
    282              
    283              if(BitIsSet(button, BTN_PLUS))
   \                     ??Settings_2:
   \   000001B6   ....               LDI     R30, LOW(button)
   \   000001B8   ....               LDI     R31, (button) >> 8
   \   000001BA   8100               LD      R16, Z
   \   000001BC   FF02               SBRS    R16, 2
   \   000001BE   C074               RJMP    ??Settings_22
    284              {
    285                  BUTTON_RESET(BTN_PLUS, 5);
   \   000001C0   E005               LDI     R16, 5
   \   000001C2   9300....           STS     (protectKeys + 2), R16
   \   000001C6   ....               LDI     R30, LOW(button)
   \   000001C8   ....               LDI     R31, (button) >> 8
   \   000001CA   8100               LD      R16, Z
   \   000001CC   7F0B               ANDI    R16, 0xFB
   \   000001CE   8300               ST      Z, R16
    286                  
    287                  switch(settingsMode)
   \   000001D0   9100....           LDS     R16, settingsMode
   \   000001D4   ....               LDI     R30, LOW(`?<Jumptable for Settings>_2`)
   \   000001D6   ....               LDI     R31, (`?<Jumptable for Settings>_2`) >> 8
   \   000001D8   ........           JMP     ?CV_SWITCH_L06
    288                  {
    289                      case 1: if(++hour > 23) hour = 0;  
   \                     ??Settings_23:
   \   000001DC   9100....           LDS     R16, hour
   \   000001E0   9503               INC     R16
   \   000001E2   9300....           STS     hour, R16
   \   000001E6   3108               CPI     R16, 24
   \   000001E8   F018               BRCS    ??Settings_24
   \   000001EA   E000               LDI     R16, 0
   \   000001EC   9300....           STS     hour, R16
    290                          break;
   \                     ??Settings_24:
   \   000001F0   C05B               RJMP    ??Settings_22
    291                      case 2: if(++min > 59) min = 0;
   \                     ??Settings_25:
   \   000001F2   9100....           LDS     R16, min
   \   000001F6   9503               INC     R16
   \   000001F8   9300....           STS     min, R16
   \   000001FC   330C               CPI     R16, 60
   \   000001FE   F018               BRCS    ??Settings_26
   \   00000200   E000               LDI     R16, 0
   \   00000202   9300....           STS     min, R16
    292                          break;
   \                     ??Settings_26:
   \   00000206   C050               RJMP    ??Settings_22
    293                      case 3: sec = 0; 
   \                     ??Settings_27:
   \   00000208   E000               LDI     R16, 0
   \   0000020A   9300....           STS     `sec`, R16
    294                          break;
   \   0000020E   C04C               RJMP    ??Settings_22
    295                      case 4: if(++day > 31) day = 1; 
   \                     ??Settings_28:
   \   00000210   9100....           LDS     R16, day
   \   00000214   9503               INC     R16
   \   00000216   9300....           STS     day, R16
   \   0000021A   3200               CPI     R16, 32
   \   0000021C   F018               BRCS    ??Settings_29
   \   0000021E   E001               LDI     R16, 1
   \   00000220   9300....           STS     day, R16
    296                          break;  
   \                     ??Settings_29:
   \   00000224   C041               RJMP    ??Settings_22
    297                      case 5: if(++mon > 12) mon = 1; 
   \                     ??Settings_30:
   \   00000226   9100....           LDS     R16, mon
   \   0000022A   9503               INC     R16
   \   0000022C   9300....           STS     mon, R16
   \   00000230   300D               CPI     R16, 13
   \   00000232   F1D0               BRCS    ??Settings_22
   \   00000234   E001               LDI     R16, 1
   \   00000236   9300....           STS     mon, R16
    298                          break;
   \   0000023A   C036               RJMP    ??Settings_22
    299                      case 6: if(++year > 99) year = 0;
   \                     ??Settings_31:
   \   0000023C   9100....           LDS     R16, year
   \   00000240   9503               INC     R16
   \   00000242   9300....           STS     year, R16
   \   00000246   3604               CPI     R16, 100
   \   00000248   F178               BRCS    ??Settings_22
   \   0000024A   E000               LDI     R16, 0
   \   0000024C   9300....           STS     year, R16
    300                          break;
   \   00000250   C02B               RJMP    ??Settings_22
    301                      case 7: eLEADZERO = 1;
   \                     ??Settings_32:
   \   00000252   E001               LDI     R16, 1
   \   00000254   ....               LDI     R20, LOW(eLEADZERO)
   \   00000256   ....               LDI     R21, (eLEADZERO) >> 8
   \   00000258   ........           CALL    __eeput8_16
    302                          break;
   \   0000025C   C025               RJMP    ??Settings_22
    303                      case 8: eSEPARATOR = 1; 
   \                     ??Settings_33:
   \   0000025E   E001               LDI     R16, 1
   \   00000260   ....               LDI     R20, LOW(eSEPARATOR)
   \   00000262   ....               LDI     R21, (eSEPARATOR) >> 8
   \   00000264   ........           CALL    __eeput8_16
    304                          break;
   \   00000268   C01F               RJMP    ??Settings_22
    305                      case 9: if(eBL_MODE < 6) eBL_MODE++; 
   \                     ??Settings_34:
   \   0000026A   ....               LDI     R20, LOW(eBL_MODE)
   \   0000026C   ....               LDI     R21, (eBL_MODE) >> 8
   \   0000026E   ........           CALL    __eeget8_16
   \   00000272   3006               CPI     R16, 6
   \   00000274   F4C8               BRCC    ??Settings_22
   \   00000276   ....               LDI     R20, LOW(eBL_MODE)
   \   00000278   ....               LDI     R21, (eBL_MODE) >> 8
   \   0000027A   ........           CALL    __eeget8_16
   \   0000027E   9503               INC     R16
   \   00000280   ....               LDI     R20, LOW(eBL_MODE)
   \   00000282   ....               LDI     R21, (eBL_MODE) >> 8
   \   00000284   ........           CALL    __eeput8_16
    306                          break;
   \   00000288   C00F               RJMP    ??Settings_22
    307                      case 10:if(eMIX_DELAY < 99) eMIX_DELAY++; 
   \                     ??Settings_35:
   \   0000028A   ....               LDI     R20, LOW(eMIX_DELAY)
   \   0000028C   ....               LDI     R21, (eMIX_DELAY) >> 8
   \   0000028E   ........           CALL    __eeget8_16
   \   00000292   3603               CPI     R16, 99
   \   00000294   F448               BRCC    ??Settings_22
   \   00000296   ....               LDI     R20, LOW(eMIX_DELAY)
   \   00000298   ....               LDI     R21, (eMIX_DELAY) >> 8
   \   0000029A   ........           CALL    __eeget8_16
   \   0000029E   9503               INC     R16
   \   000002A0   ....               LDI     R20, LOW(eMIX_DELAY)
   \   000002A2   ....               LDI     R21, (eMIX_DELAY) >> 8
   \   000002A4   ........           CALL    __eeput8_16
    308                          break;
    309                  }
    310              }
    311              
    312              if(BitIsSet(button, BTN_MINUS))
   \                     ??Settings_22:
   \   000002A8   ....               LDI     R30, LOW(button)
   \   000002AA   ....               LDI     R31, (button) >> 8
   \   000002AC   8100               LD      R16, Z
   \   000002AE   FF01               SBRS    R16, 1
   \   000002B0   C074               RJMP    ??Settings_36
    313              {
    314                  BUTTON_RESET(BTN_MINUS, 5);
   \   000002B2   E005               LDI     R16, 5
   \   000002B4   9300....           STS     (protectKeys + 1), R16
   \   000002B8   ....               LDI     R30, LOW(button)
   \   000002BA   ....               LDI     R31, (button) >> 8
   \   000002BC   8100               LD      R16, Z
   \   000002BE   7F0D               ANDI    R16, 0xFD
   \   000002C0   8300               ST      Z, R16
    315                  
    316                  switch(settingsMode)
   \   000002C2   9100....           LDS     R16, settingsMode
   \   000002C6   ....               LDI     R30, LOW(`?<Jumptable for Settings>_3`)
   \   000002C8   ....               LDI     R31, (`?<Jumptable for Settings>_3`) >> 8
   \   000002CA   ........           JMP     ?CV_SWITCH_L06
    317                  {
    318                      case 1: if(--hour > 23)  hour = 23; 
   \                     ??Settings_37:
   \   000002CE   9100....           LDS     R16, hour
   \   000002D2   950A               DEC     R16
   \   000002D4   9300....           STS     hour, R16
   \   000002D8   3108               CPI     R16, 24
   \   000002DA   F018               BRCS    ??Settings_38
   \   000002DC   E107               LDI     R16, 23
   \   000002DE   9300....           STS     hour, R16
    319                          break;
   \                     ??Settings_38:
   \   000002E2   9508               RET
    320                      case 2: if(--min > 59)  min = 59;  
   \                     ??Settings_39:
   \   000002E4   9100....           LDS     R16, min
   \   000002E8   950A               DEC     R16
   \   000002EA   9300....           STS     min, R16
   \   000002EE   330C               CPI     R16, 60
   \   000002F0   F018               BRCS    ??Settings_40
   \   000002F2   E30B               LDI     R16, 59
   \   000002F4   9300....           STS     min, R16
    321                          break;
   \                     ??Settings_40:
   \   000002F8   9508               RET
    322                      case 3: sec = 0; 
   \                     ??Settings_41:
   \   000002FA   E000               LDI     R16, 0
   \   000002FC   9300....           STS     `sec`, R16
    323                          break;
   \   00000300   9508               RET
    324                      case 4: if(--day < 1) day = 31;  
   \                     ??Settings_42:
   \   00000302   9100....           LDS     R16, day
   \   00000306   950A               DEC     R16
   \   00000308   9300....           STS     day, R16
   \   0000030C   3001               CPI     R16, 1
   \   0000030E   F418               BRCC    ??Settings_43
   \   00000310   E10F               LDI     R16, 31
   \   00000312   9300....           STS     day, R16
    325                          break;  
   \                     ??Settings_43:
   \   00000316   9508               RET
    326                      case 5: if(--mon < 1) mon = 12; 
   \                     ??Settings_44:
   \   00000318   9100....           LDS     R16, mon
   \   0000031C   950A               DEC     R16
   \   0000031E   9300....           STS     mon, R16
   \   00000322   3001               CPI     R16, 1
   \   00000324   F5D0               BRCC    ??Settings_36
   \   00000326   E00C               LDI     R16, 12
   \   00000328   9300....           STS     mon, R16
    327                          break;
   \   0000032C   9508               RET
    328                      case 6: if(--year > 99) year = 0;
   \                     ??Settings_45:
   \   0000032E   9100....           LDS     R16, year
   \   00000332   950A               DEC     R16
   \   00000334   9300....           STS     year, R16
   \   00000338   3604               CPI     R16, 100
   \   0000033A   F178               BRCS    ??Settings_36
   \   0000033C   E000               LDI     R16, 0
   \   0000033E   9300....           STS     year, R16
    329                          break;
   \   00000342   9508               RET
    330                      case 7: eLEADZERO = 0;
   \                     ??Settings_46:
   \   00000344   E000               LDI     R16, 0
   \   00000346   ....               LDI     R20, LOW(eLEADZERO)
   \   00000348   ....               LDI     R21, (eLEADZERO) >> 8
   \   0000034A   ........           CALL    __eeput8_16
    331                          break;
   \   0000034E   9508               RET
    332                      case 8: eSEPARATOR = 0; 
   \                     ??Settings_47:
   \   00000350   E000               LDI     R16, 0
   \   00000352   ....               LDI     R20, LOW(eSEPARATOR)
   \   00000354   ....               LDI     R21, (eSEPARATOR) >> 8
   \   00000356   ........           CALL    __eeput8_16
    333                          break;
   \   0000035A   9508               RET
    334                      case 9: if(eBL_MODE > 0) eBL_MODE--; 
   \                     ??Settings_48:
   \   0000035C   ....               LDI     R20, LOW(eBL_MODE)
   \   0000035E   ....               LDI     R21, (eBL_MODE) >> 8
   \   00000360   ........           CALL    __eeget8_16
   \   00000364   3001               CPI     R16, 1
   \   00000366   F0C8               BRCS    ??Settings_36
   \   00000368   ....               LDI     R20, LOW(eBL_MODE)
   \   0000036A   ....               LDI     R21, (eBL_MODE) >> 8
   \   0000036C   ........           CALL    __eeget8_16
   \   00000370   950A               DEC     R16
   \   00000372   ....               LDI     R20, LOW(eBL_MODE)
   \   00000374   ....               LDI     R21, (eBL_MODE) >> 8
   \   00000376   ........           CALL    __eeput8_16
    335                          break;
   \   0000037A   9508               RET
    336                      case 10:if(eMIX_DELAY > 10) eMIX_DELAY--;  
   \                     ??Settings_49:
   \   0000037C   ....               LDI     R20, LOW(eMIX_DELAY)
   \   0000037E   ....               LDI     R21, (eMIX_DELAY) >> 8
   \   00000380   ........           CALL    __eeget8_16
   \   00000384   300B               CPI     R16, 11
   \   00000386   F048               BRCS    ??Settings_36
   \   00000388   ....               LDI     R20, LOW(eMIX_DELAY)
   \   0000038A   ....               LDI     R21, (eMIX_DELAY) >> 8
   \   0000038C   ........           CALL    __eeget8_16
   \   00000390   950A               DEC     R16
   \   00000392   ....               LDI     R20, LOW(eMIX_DELAY)
   \   00000394   ....               LDI     R21, (eMIX_DELAY) >> 8
   \   00000396   ........           CALL    __eeput8_16
    337                          break;
    338                  }
    339              }
    340          }
   \                     ??Settings_36:
   \   0000039A   9508               RET
   \   0000039C                      REQUIRE _A_PIND
    341          
    342          
    343          
    344          
    345          /*******************************************************************************
    346          * Function Name  : Buttons
    347          * Description    : Buttons press handler
    348          *******************************************************************************/

   \                                 In  segment CODE, align 2, keep-with-next
    349          void Buttons()
   \                     Buttons:
    350          { 
    351              if(BitIsSet(button, BTN_SET) && !settingsMode)
   \   00000000   ....               LDI     R30, LOW(button)
   \   00000002   ....               LDI     R31, (button) >> 8
   \   00000004   8100               LD      R16, Z
   \   00000006   FF00               SBRS    R16, 0
   \   00000008   C00E               RJMP    ??Buttons_0
   \   0000000A   9100....           LDS     R16, settingsMode
   \   0000000E   2300               TST     R16
   \   00000010   F451               BRNE    ??Buttons_0
    352              {  
    353                  BUTTON_RESET(BTN_SET, 5);
   \   00000012   E005               LDI     R16, 5
   \   00000014   9300....           STS     protectKeys, R16
   \   00000018   ....               LDI     R30, LOW(button)
   \   0000001A   ....               LDI     R31, (button) >> 8
   \   0000001C   8100               LD      R16, Z
   \   0000001E   7F0E               ANDI    R16, 0xFE
   \   00000020   8300               ST      Z, R16
    354                  
    355                  BackLightChange();        
   \   00000022   ........           CALL    BackLightChange
    356              }
    357                    
    358              if(BitIsSet(button, BTN_SET) && settingsMode)
   \                     ??Buttons_0:
   \   00000026   ....               LDI     R30, LOW(button)
   \   00000028   ....               LDI     R31, (button) >> 8
   \   0000002A   8100               LD      R16, Z
   \   0000002C   FF00               SBRS    R16, 0
   \   0000002E   C12B               RJMP    ??Buttons_1
   \   00000030   9100....           LDS     R16, settingsMode
   \   00000034   2300               TST     R16
   \   00000036   F409               BRNE    $+2+2
   \   00000038   C126               RJMP    ??Buttons_1
    359              {       
    360                  BUTTON_RESET(BTN_SET, 5);
   \   0000003A   E005               LDI     R16, 5
   \   0000003C   9300....           STS     protectKeys, R16
   \   00000040   ....               LDI     R30, LOW(button)
   \   00000042   ....               LDI     R31, (button) >> 8
   \   00000044   8100               LD      R16, Z
   \   00000046   7F0E               ANDI    R16, 0xFE
   \   00000048   8300               ST      Z, R16
    361                  
    362                  if(settingsMode <= 3) 
   \   0000004A   9100....           LDS     R16, settingsMode
   \   0000004E   3004               CPI     R16, 4
   \   00000050   F440               BRCC    ??Buttons_2
    363                      DS1307SetTime(hour, min, sec);  
   \   00000052   9120....           LDS     R18, `sec`
   \   00000056   9110....           LDS     R17, min
   \   0000005A   9100....           LDS     R16, hour
   \   0000005E   ........           CALL    DS1307SetTime
    364                  
    365                  if(settingsMode > 3 && settingsMode < 7) 
   \                     ??Buttons_2:
   \   00000062   9100....           LDS     R16, settingsMode
   \   00000066   3004               CPI     R16, 4
   \   00000068   F060               BRCS    ??Buttons_3
   \   0000006A   9100....           LDS     R16, settingsMode
   \   0000006E   3007               CPI     R16, 7
   \   00000070   F440               BRCC    ??Buttons_3
    366                      DS1307SetDate(day, mon, year); 
   \   00000072   9120....           LDS     R18, year
   \   00000076   9110....           LDS     R17, mon
   \   0000007A   9100....           LDS     R16, day
   \   0000007E   ........           CALL    DS1307SetDate
    367                  
    368                  ZeroBL();
   \                     ??Buttons_3:
   \   00000082   ........           CALL    ZeroBL
    369                  
    370                  switch(++settingsMode)
   \   00000086   9100....           LDS     R16, settingsMode
   \   0000008A   9503               INC     R16
   \   0000008C   9300....           STS     settingsMode, R16
   \   00000090   ....               LDI     R30, LOW(`?<Jumptable for Buttons>_0`)
   \   00000092   ....               LDI     R31, (`?<Jumptable for Buttons>_0`) >> 8
   \   00000094   ........           JMP     ?CV_SWITCH_L06
    371                  {
    372                      case 1: outB[0]=255; outB[1]=255; break;
   \                     ??Buttons_4:
   \   00000098   EF0F               LDI     R16, 255
   \   0000009A   9300....           STS     outB, R16
   \   0000009E   EF0F               LDI     R16, 255
   \   000000A0   9300....           STS     (outB + 1), R16
   \   000000A4   C04D               RJMP    ??Buttons_5
    373                      case 2: outG[2]=255; outG[3]=255; break;
   \                     ??Buttons_6:
   \   000000A6   EF0F               LDI     R16, 255
   \   000000A8   9300....           STS     (outG + 2), R16
   \   000000AC   EF0F               LDI     R16, 255
   \   000000AE   9300....           STS     (outG + 3), R16
   \   000000B2   C046               RJMP    ??Buttons_5
    374                      case 3: outR[4]=255; outR[5]=255; break;
   \                     ??Buttons_7:
   \   000000B4   EF0F               LDI     R16, 255
   \   000000B6   9300....           STS     (outR + 4), R16
   \   000000BA   EF0F               LDI     R16, 255
   \   000000BC   9300....           STS     (outR + 5), R16
   \   000000C0   C03F               RJMP    ??Buttons_5
    375                      
    376                      case 4: outB[0]=255; outB[1]=255; outR[0]=255; outR[1]=255; break;
   \                     ??Buttons_8:
   \   000000C2   EF0F               LDI     R16, 255
   \   000000C4   9300....           STS     outB, R16
   \   000000C8   EF0F               LDI     R16, 255
   \   000000CA   9300....           STS     (outB + 1), R16
   \   000000CE   EF0F               LDI     R16, 255
   \   000000D0   9300....           STS     outR, R16
   \   000000D4   EF0F               LDI     R16, 255
   \   000000D6   9300....           STS     (outR + 1), R16
   \   000000DA   C032               RJMP    ??Buttons_5
    377                      case 5: outG[2]=255; outG[3]=255; outR[2]=255; outR[3]=255; break;
   \                     ??Buttons_9:
   \   000000DC   EF0F               LDI     R16, 255
   \   000000DE   9300....           STS     (outG + 2), R16
   \   000000E2   EF0F               LDI     R16, 255
   \   000000E4   9300....           STS     (outG + 3), R16
   \   000000E8   EF0F               LDI     R16, 255
   \   000000EA   9300....           STS     (outR + 2), R16
   \   000000EE   EF0F               LDI     R16, 255
   \   000000F0   9300....           STS     (outR + 3), R16
   \   000000F4   C025               RJMP    ??Buttons_5
    378                      case 6: outG[4]=255; outG[5]=255; outB[4]=255; outB[5]=255; break;
   \                     ??Buttons_10:
   \   000000F6   EF0F               LDI     R16, 255
   \   000000F8   9300....           STS     (outG + 4), R16
   \   000000FC   EF0F               LDI     R16, 255
   \   000000FE   9300....           STS     (outG + 5), R16
   \   00000102   EF0F               LDI     R16, 255
   \   00000104   9300....           STS     (outB + 4), R16
   \   00000108   EF0F               LDI     R16, 255
   \   0000010A   9300....           STS     (outB + 5), R16
   \   0000010E   C018               RJMP    ??Buttons_5
    379                      
    380                      case 7: outB[0]=255; break;
   \                     ??Buttons_11:
   \   00000110   EF0F               LDI     R16, 255
   \   00000112   9300....           STS     outB, R16
   \   00000116   C014               RJMP    ??Buttons_5
    381                      case 8: outR[1]=255; outG[1]=255; break;
   \                     ??Buttons_12:
   \   00000118   EF0F               LDI     R16, 255
   \   0000011A   9300....           STS     (outR + 1), R16
   \   0000011E   EF0F               LDI     R16, 255
   \   00000120   9300....           STS     (outG + 1), R16
   \   00000124   C00D               RJMP    ??Buttons_5
    382                      case 9: outR[2]=255; outR[3]=255; break;
   \                     ??Buttons_13:
   \   00000126   EF0F               LDI     R16, 255
   \   00000128   9300....           STS     (outR + 2), R16
   \   0000012C   EF0F               LDI     R16, 255
   \   0000012E   9300....           STS     (outR + 3), R16
   \   00000132   C006               RJMP    ??Buttons_5
    383                      case 10:outB[4]=255; outB[5]=255; break;
   \                     ??Buttons_14:
   \   00000134   EF0F               LDI     R16, 255
   \   00000136   9300....           STS     (outB + 4), R16
   \   0000013A   EF0F               LDI     R16, 255
   \   0000013C   9300....           STS     (outB + 5), R16
    384                  }
    385                  
    386                  if(settingsMode <= 3) 
   \                     ??Buttons_5:
   \   00000140   9100....           LDS     R16, settingsMode
   \   00000144   3004               CPI     R16, 4
   \   00000146   F550               BRCC    ??Buttons_15
    387                  {
    388                      out[0] = hour/10; 
   \   00000148   E04A               LDI     R20, 10
   \   0000014A   9100....           LDS     R16, hour
   \   0000014E   ........           CALL    ?UC_DIVMOD_L01
   \   00000152   9300....           STS     `out`, R16
    389                      out[1] = hour%10;
   \   00000156   E04A               LDI     R20, 10
   \   00000158   9100....           LDS     R16, hour
   \   0000015C   ........           CALL    ?UC_DIVMOD_L01
   \   00000160   9340....           STS     (`out` + 1), R20
    390                      out[2] = min/10; 
   \   00000164   E04A               LDI     R20, 10
   \   00000166   9100....           LDS     R16, min
   \   0000016A   ........           CALL    ?UC_DIVMOD_L01
   \   0000016E   9300....           STS     (`out` + 2), R16
    391                      out[3] = min%10;
   \   00000172   E04A               LDI     R20, 10
   \   00000174   9100....           LDS     R16, min
   \   00000178   ........           CALL    ?UC_DIVMOD_L01
   \   0000017C   9340....           STS     (`out` + 3), R20
    392                      out[4] = sec/10; 
   \   00000180   E04A               LDI     R20, 10
   \   00000182   9100....           LDS     R16, `sec`
   \   00000186   ........           CALL    ?UC_DIVMOD_L01
   \   0000018A   9300....           STS     (`out` + 4), R16
    393                      out[5] = sec%10;
   \   0000018E   E04A               LDI     R20, 10
   \   00000190   9100....           LDS     R16, `sec`
   \   00000194   ........           CALL    ?UC_DIVMOD_L01
   \   00000198   9340....           STS     (`out` + 5), R20
    394                  }
    395                  
    396                  if(settingsMode > 3 && settingsMode < 7) 
   \                     ??Buttons_15:
   \   0000019C   9100....           LDS     R16, settingsMode
   \   000001A0   3004               CPI     R16, 4
   \   000001A2   F170               BRCS    ??Buttons_16
   \   000001A4   9100....           LDS     R16, settingsMode
   \   000001A8   3007               CPI     R16, 7
   \   000001AA   F550               BRCC    ??Buttons_16
    397                  {
    398                      out[0] = day/10; 
   \   000001AC   E04A               LDI     R20, 10
   \   000001AE   9100....           LDS     R16, day
   \   000001B2   ........           CALL    ?UC_DIVMOD_L01
   \   000001B6   9300....           STS     `out`, R16
    399                      out[1] = day%10;
   \   000001BA   E04A               LDI     R20, 10
   \   000001BC   9100....           LDS     R16, day
   \   000001C0   ........           CALL    ?UC_DIVMOD_L01
   \   000001C4   9340....           STS     (`out` + 1), R20
    400                      out[2] = mon/10; 
   \   000001C8   E04A               LDI     R20, 10
   \   000001CA   9100....           LDS     R16, mon
   \   000001CE   ........           CALL    ?UC_DIVMOD_L01
   \   000001D2   9300....           STS     (`out` + 2), R16
    401                      out[3] = mon%10;
   \   000001D6   E04A               LDI     R20, 10
   \   000001D8   9100....           LDS     R16, mon
   \   000001DC   ........           CALL    ?UC_DIVMOD_L01
   \   000001E0   9340....           STS     (`out` + 3), R20
    402                      out[4] = year/10; 
   \   000001E4   E04A               LDI     R20, 10
   \   000001E6   9100....           LDS     R16, year
   \   000001EA   ........           CALL    ?UC_DIVMOD_L01
   \   000001EE   9300....           STS     (`out` + 4), R16
    403                      out[5] = year%10;
   \   000001F2   E04A               LDI     R20, 10
   \   000001F4   9100....           LDS     R16, year
   \   000001F8   ........           CALL    ?UC_DIVMOD_L01
   \   000001FC   9340....           STS     (`out` + 5), R20
    404                  }
    405                  
    406                  if(settingsMode >= 7) 
   \                     ??Buttons_16:
   \   00000200   9100....           LDS     R16, settingsMode
   \   00000204   3007               CPI     R16, 7
   \   00000206   F1C0               BRCS    ??Buttons_17
    407                  {
    408                      out[0] = eLEADZERO; 
   \   00000208   ....               LDI     R20, LOW(eLEADZERO)
   \   0000020A   ....               LDI     R21, (eLEADZERO) >> 8
   \   0000020C   ........           CALL    __eeget8_16
   \   00000210   9300....           STS     `out`, R16
    409                      out[1] = eSEPARATOR;
   \   00000214   ....               LDI     R20, LOW(eSEPARATOR)
   \   00000216   ....               LDI     R21, (eSEPARATOR) >> 8
   \   00000218   ........           CALL    __eeget8_16
   \   0000021C   9300....           STS     (`out` + 1), R16
    410                      out[2] = eBL_MODE/10; 
   \   00000220   E04A               LDI     R20, 10
   \   00000222   2F14               MOV     R17, R20
   \   00000224   ....               LDI     R20, LOW(eBL_MODE)
   \   00000226   ....               LDI     R21, (eBL_MODE) >> 8
   \   00000228   ........           CALL    __eeget8_16
   \   0000022C   2F41               MOV     R20, R17
   \   0000022E   ........           CALL    ?UC_DIVMOD_L01
   \   00000232   9300....           STS     (`out` + 2), R16
    411                      out[3] = eBL_MODE%10; 
   \   00000236   E04A               LDI     R20, 10
   \   00000238   2F14               MOV     R17, R20
   \   0000023A   ....               LDI     R20, LOW(eBL_MODE)
   \   0000023C   ....               LDI     R21, (eBL_MODE) >> 8
   \   0000023E   ........           CALL    __eeget8_16
   \   00000242   2F41               MOV     R20, R17
   \   00000244   ........           CALL    ?UC_DIVMOD_L01
   \   00000248   9340....           STS     (`out` + 3), R20
    412                      out[4] = eMIX_DELAY/10;
   \   0000024C   E04A               LDI     R20, 10
   \   0000024E   2F14               MOV     R17, R20
   \   00000250   ....               LDI     R20, LOW(eMIX_DELAY)
   \   00000252   ....               LDI     R21, (eMIX_DELAY) >> 8
   \   00000254   ........           CALL    __eeget8_16
   \   00000258   2F41               MOV     R20, R17
   \   0000025A   ........           CALL    ?UC_DIVMOD_L01
   \   0000025E   9300....           STS     (`out` + 4), R16
    413                      out[5] = eMIX_DELAY%10; 
   \   00000262   E04A               LDI     R20, 10
   \   00000264   2F14               MOV     R17, R20
   \   00000266   ....               LDI     R20, LOW(eMIX_DELAY)
   \   00000268   ....               LDI     R21, (eMIX_DELAY) >> 8
   \   0000026A   ........           CALL    __eeget8_16
   \   0000026E   2F41               MOV     R20, R17
   \   00000270   ........           CALL    ?UC_DIVMOD_L01
   \   00000274   9340....           STS     (`out` + 5), R20
    414                  }
    415                  
    416                  if(settingsMode > 10) settingsMode = 0;    
   \                     ??Buttons_17:
   \   00000278   9100....           LDS     R16, settingsMode
   \   0000027C   300B               CPI     R16, 11
   \   0000027E   F018               BRCS    ??Buttons_1
   \   00000280   E000               LDI     R16, 0
   \   00000282   9300....           STS     settingsMode, R16
    417              }      
    418              
    419              
    420              //Button MINUS
    421              if(BitIsSet(button, BTN_MINUS) && !settingsMode)
   \                     ??Buttons_1:
   \   00000286   ....               LDI     R30, LOW(button)
   \   00000288   ....               LDI     R31, (button) >> 8
   \   0000028A   8100               LD      R16, Z
   \   0000028C   FF01               SBRS    R16, 1
   \   0000028E   C02E               RJMP    ??Buttons_18
   \   00000290   9100....           LDS     R16, settingsMode
   \   00000294   2300               TST     R16
   \   00000296   F551               BRNE    ??Buttons_18
    422              {  
    423                  BUTTON_RESET(BTN_MINUS, 10);
   \   00000298   E00A               LDI     R16, 10
   \   0000029A   9300....           STS     (protectKeys + 1), R16
   \   0000029E   ....               LDI     R30, LOW(button)
   \   000002A0   ....               LDI     R31, (button) >> 8
   \   000002A2   8100               LD      R16, Z
   \   000002A4   7F0D               ANDI    R16, 0xFD
   \   000002A6   8300               ST      Z, R16
    424                  
    425                  switch(BLGetType())
   \   000002A8   ........           CALL    BLGetType
   \   000002AC   5000               SUBI    R16, 0
   \   000002AE   F069               BREQ    ??Buttons_19
   \   000002B0   950A               DEC     R16
   \   000002B2   F069               BREQ    ??Buttons_20
   \   000002B4   950A               DEC     R16
   \   000002B6   F069               BREQ    ??Buttons_21
   \   000002B8   950A               DEC     R16
   \   000002BA   F069               BREQ    ??Buttons_22
   \   000002BC   950A               DEC     R16
   \   000002BE   F079               BREQ    ??Buttons_23
   \   000002C0   950A               DEC     R16
   \   000002C2   F079               BREQ    ??Buttons_24
   \   000002C4   950A               DEC     R16
   \   000002C6   F079               BREQ    ??Buttons_25
   \   000002C8   C011               RJMP    ??Buttons_18
    426                  {
    427                      case 0: GetDate(); 
   \                     ??Buttons_19:
   \   000002CA   ....               RCALL   GetDate
    428                          break;
   \   000002CC   C00F               RJMP    ??Buttons_18
    429                      case 1: GetDate();  
   \                     ??Buttons_20:
   \   000002CE   ....               RCALL   GetDate
    430                          break;                           
   \   000002D0   C00D               RJMP    ??Buttons_18
    431                      case 2: GetDate(); 
   \                     ??Buttons_21:
   \   000002D2   ....               RCALL   GetDate
    432                          break;     
   \   000002D4   C00B               RJMP    ??Buttons_18
    433                      case 3: BinaryChangeEffect(DIR_DOWN);
   \                     ??Buttons_22:
   \   000002D6   E000               LDI     R16, 0
   \   000002D8   ........           CALL    BinaryChangeEffect
    434                          break;               
   \   000002DC   C007               RJMP    ??Buttons_18
    435                      case 4: GetDate(); 
   \                     ??Buttons_23:
   \   000002DE   ....               RCALL   GetDate
    436                          break;      
   \   000002E0   C005               RJMP    ??Buttons_18
    437                      case 5: GetDate();
   \                     ??Buttons_24:
   \   000002E2   ....               RCALL   GetDate
    438                          break;
   \   000002E4   C003               RJMP    ??Buttons_18
    439                      case 6: HSVchange(DIR_DOWN);
   \                     ??Buttons_25:
   \   000002E6   E000               LDI     R16, 0
   \   000002E8   ........           CALL    HSVchange
    440                          break; 
    441                  }
    442              }
    443                  
    444              //Button PLUS
    445              if(BitIsSet(button, BTN_PLUS) && !settingsMode)
   \                     ??Buttons_18:
   \   000002EC   ....               LDI     R30, LOW(button)
   \   000002EE   ....               LDI     R31, (button) >> 8
   \   000002F0   8100               LD      R16, Z
   \   000002F2   FF02               SBRS    R16, 2
   \   000002F4   C02E               RJMP    ??Buttons_26
   \   000002F6   9100....           LDS     R16, settingsMode
   \   000002FA   2300               TST     R16
   \   000002FC   F551               BRNE    ??Buttons_26
    446              {  
    447                  BUTTON_RESET(BTN_PLUS, 10);
   \   000002FE   E00A               LDI     R16, 10
   \   00000300   9300....           STS     (protectKeys + 2), R16
   \   00000304   ....               LDI     R30, LOW(button)
   \   00000306   ....               LDI     R31, (button) >> 8
   \   00000308   8100               LD      R16, Z
   \   0000030A   7F0B               ANDI    R16, 0xFB
   \   0000030C   8300               ST      Z, R16
    448                  
    449                  switch(BLGetType())
   \   0000030E   ........           CALL    BLGetType
   \   00000312   5000               SUBI    R16, 0
   \   00000314   F069               BREQ    ??Buttons_27
   \   00000316   950A               DEC     R16
   \   00000318   F069               BREQ    ??Buttons_28
   \   0000031A   950A               DEC     R16
   \   0000031C   F069               BREQ    ??Buttons_29
   \   0000031E   950A               DEC     R16
   \   00000320   F069               BREQ    ??Buttons_30
   \   00000322   950A               DEC     R16
   \   00000324   F079               BREQ    ??Buttons_31
   \   00000326   950A               DEC     R16
   \   00000328   F079               BREQ    ??Buttons_32
   \   0000032A   950A               DEC     R16
   \   0000032C   F079               BREQ    ??Buttons_33
   \   0000032E   9508               RET
    450                  {
    451                      case 0: GetDate(); 
   \                     ??Buttons_27:
   \   00000330   ....               RCALL   GetDate
    452                          break;
   \   00000332   9508               RET
    453                      case 1: GetDate();  
   \                     ??Buttons_28:
   \   00000334   ....               RCALL   GetDate
    454                          break;                           
   \   00000336   9508               RET
    455                      case 2: GetDate(); 
   \                     ??Buttons_29:
   \   00000338   ....               RCALL   GetDate
    456                          break;     
   \   0000033A   9508               RET
    457                      case 3: BinaryChangeEffect(DIR_UP);
   \                     ??Buttons_30:
   \   0000033C   E001               LDI     R16, 1
   \   0000033E   ........           CALL    BinaryChangeEffect
    458                          break;               
   \   00000342   9508               RET
    459                      case 4: GetDate(); 
   \                     ??Buttons_31:
   \   00000344   ....               RCALL   GetDate
    460                          break;      
   \   00000346   9508               RET
    461                      case 5: GetDate();
   \                     ??Buttons_32:
   \   00000348   ....               RCALL   GetDate
    462                          break;
   \   0000034A   9508               RET
    463                      case 6: HSVchange(DIR_UP);
   \                     ??Buttons_33:
   \   0000034C   E001               LDI     R16, 1
   \   0000034E   ........           CALL    HSVchange
    464                          break;
    465                  }
    466              }
    467          }
   \                     ??Buttons_26:
   \   00000352   9508               RET
    468          
    469          /*******************************************************************************
    470          * Function Name  : Main
    471          * Description    : Main routine
    472          *******************************************************************************/

   \                                 In  segment CODE, align 2, keep-with-next
    473          void main()
   \                     main:
    474          {
   \   00000000   938A               ST      -Y, R24
    475              Initialization(); 
   \   00000002   ....               RCALL   Initialization
    476              for(uint8_t i=0; i<SMOOTH_NUM_CHANNELS; i++) SmoothInit(i);
   \   00000004   E080               LDI     R24, 0
   \   00000006   C004               RJMP    ??main_0
   \                     ??main_1:
   \   00000008   2F08               MOV     R16, R24
   \   0000000A   ........           CALL    SmoothInit
   \   0000000E   9583               INC     R24
   \                     ??main_0:
   \   00000010   3182               CPI     R24, 18
   \   00000012   F3D0               BRCS    ??main_1
    477              
    478              while(1)
    479              {             
    480                  if(settingsFlag)        //correct initialization of settings mode
   \                     ??main_2:
   \   00000014   9100....           LDS     R16, settingsFlag
   \   00000018   2300               TST     R16
   \   0000001A   F071               BREQ    ??main_3
    481                  {
    482                      settingsMode = 1;
   \   0000001C   E001               LDI     R16, 1
   \   0000001E   9300....           STS     settingsMode, R16
    483                      settingsFlag = 0;
   \   00000022   E000               LDI     R16, 0
   \   00000024   9300....           STS     settingsFlag, R16
    484                      ZeroBL();
   \   00000028   ........           CALL    ZeroBL
    485                      outB[0]=255; 
   \   0000002C   EF0F               LDI     R16, 255
   \   0000002E   9300....           STS     outB, R16
    486                      outB[1]=255;
   \   00000032   EF0F               LDI     R16, 255
   \   00000034   9300....           STS     (outB + 1), R16
    487                  }
    488                  
    489                  if(Global1HzFlag && !settingsMode)  //time update
   \                     ??main_3:
   \   00000038   9100....           LDS     R16, Global1HzFlag
   \   0000003C   2300               TST     R16
   \   0000003E   F0E9               BREQ    ??main_4
   \   00000040   9100....           LDS     R16, settingsMode
   \   00000044   2300               TST     R16
   \   00000046   F4C9               BRNE    ??main_4
    490                  {      
    491                      Global1HzFlag = 0;
   \   00000048   E000               LDI     R16, 0
   \   0000004A   9300....           STS     Global1HzFlag, R16
    492                      
    493                      DS1307GetTime(&hour, &min, &sec);
   \   0000004E   ....               LDI     R20, LOW(`sec`)
   \   00000050   ....               LDI     R21, (`sec`) >> 8
   \   00000052   ....               LDI     R18, LOW(min)
   \   00000054   ....               LDI     R19, (min) >> 8
   \   00000056   ....               LDI     R16, LOW(hour)
   \   00000058   ....               LDI     R17, (hour) >> 8
   \   0000005A   ........           CALL    DS1307GetTime
    494                      Soft(hour, min, sec);   
   \   0000005E   9120....           LDS     R18, `sec`
   \   00000062   9110....           LDS     R17, min
   \   00000066   9100....           LDS     R16, hour
   \   0000006A   ........           CALL    Soft
    495                      
    496                      if(!BLType) MixBLReduceTime();
   \   0000006E   9100....           LDS     R16, BLType
   \   00000072   2300               TST     R16
   \   00000074   F411               BRNE    ??main_4
   \   00000076   ........           CALL    MixBLReduceTime
    497                  }
    498                  
    499                  if(settingsMode) Settings();            //settings mode
   \                     ??main_4:
   \   0000007A   9100....           LDS     R16, settingsMode
   \   0000007E   2300               TST     R16
   \   00000080   F009               BREQ    ??main_5
   \   00000082   ....               RCALL   Settings
    500                  if(!settingsMode) BackLightProcess();   //backlight processing
   \                     ??main_5:
   \   00000084   9100....           LDS     R16, settingsMode
   \   00000088   2300               TST     R16
   \   0000008A   F411               BRNE    ??main_6
   \   0000008C   ........           CALL    BackLightProcess
    501                  
    502                  Buttons();                              //buttons processing
   \                     ??main_6:
   \   00000090   ....               RCALL   Buttons
    503                  
    504                  if(!settingsMode && eSEPARATOR)         //dots
   \   00000092   9100....           LDS     R16, settingsMode
   \   00000096   2300               TST     R16
   \   00000098   F449               BRNE    ??main_7
   \   0000009A   ....               LDI     R20, LOW(eSEPARATOR)
   \   0000009C   ....               LDI     R21, (eSEPARATOR) >> 8
   \   0000009E   ........           CALL    __eeget8_16
   \   000000A2   2300               TST     R16
   \   000000A4   F019               BREQ    ??main_7
    505                      DOTS_ON 
   \   000000A6   9AAE               SBI     0x15, 0x06
   \   000000A8   9ADD               SBI     0x1B, 0x05
   \   000000AA   CFB4               RJMP    ??main_2
    506                  else                                
    507                      DOTS_OFF;
   \                     ??main_7:
   \   000000AC   98AE               CBI     0x15, 0x06
   \   000000AE   98DD               CBI     0x1B, 0x05
   \   000000B0   CFB1               RJMP    ??main_2
   \   000000B2                      REQUIRE _A_PORTA
   \   000000B2                      REQUIRE _A_PORTC
    508              }
    509          }
    510          
    511          
    512          
    513          /*******************************************************************************
    514          * Function Name  : Over
    515          * Description    : Timer2 overflow handler - 2.441 Hz
    516          *******************************************************************************/
    517          #pragma vector = TIMER2_OVF_vect 

   \                                 In  segment CODE, align 2, keep-with-next
    518          __interrupt void Over()
   \                     Over:
    519          {    
   \   00000000   93FA               ST      -Y, R31
   \   00000002   93EA               ST      -Y, R30
   \   00000004   921A               ST      -Y, R1
   \   00000006   920A               ST      -Y, R0
   \   00000008   936A               ST      -Y, R22
   \   0000000A   935A               ST      -Y, R21
   \   0000000C   934A               ST      -Y, R20
   \   0000000E   933A               ST      -Y, R19
   \   00000010   932A               ST      -Y, R18
   \   00000012   931A               ST      -Y, R17
   \   00000014   930A               ST      -Y, R16
   \   00000016   B76F               IN      R22, 0x3F
    520          //Digits    
    521              //DC: OUT disable
    522              PORTC |=   (1<<3)|(1<<4);
   \   00000018   B305               IN      R16, 0x15
   \   0000001A   6108               ORI     R16, 0x18
   \   0000001C   BB05               OUT     0x15, R16
    523              PORTC &= ~((1<<2)|(1<<5));
   \   0000001E   B305               IN      R16, 0x15
   \   00000020   7D0B               ANDI    R16, 0xDB
   \   00000022   BB05               OUT     0x15, R16
    524              PORTA |=   (1<<1)|(1<<2);
   \   00000024   B30B               IN      R16, 0x1B
   \   00000026   6006               ORI     R16, 0x06
   \   00000028   BB0B               OUT     0x1B, R16
    525              PORTA &= ~((1<<0)|(1<<3));
   \   0000002A   B30B               IN      R16, 0x1B
   \   0000002C   7F06               ANDI    R16, 0xF6
   \   0000002E   BB0B               OUT     0x1B, R16
    526           
    527              OCR2 = level[digit]; //255 = min  1 = max
   \   00000030   9100....           LDS     R16, digit
   \   00000034   E010               LDI     R17, 0
   \   00000036   01F8               MOVW    R31:R30, R17:R16
   \   00000038   ....               SUBI    R30, LOW((-(level) & 0xFFFF))
   \   0000003A   ....               SBCI    R31, (-(level) & 0xFFFF) >> 8
   \   0000003C   8100               LD      R16, Z
   \   0000003E   BD03               OUT     0x23, R16
    528              
    529              if (tranCounter < 25) //bright mass has 25 values
   \   00000040   9100....           LDS     R16, tranCounter
   \   00000044   3109               CPI     R16, 25
   \   00000046   F008               BRCS    $+2+2
   \   00000048   C052               RJMP    ??Over_0
    530              { 
    531                  static uint8_t tranSmooth = 0;           
    532                  
    533                  if (++tranSmooth >= 50)         //bigger -> smoother numbers change
   \   0000004A   9100....           LDS     R16, ??tranSmooth
   \   0000004E   9503               INC     R16
   \   00000050   9300....           STS     ??tranSmooth, R16
   \   00000054   3302               CPI     R16, 50
   \   00000056   F408               BRCC    $+2+2
   \   00000058   C04A               RJMP    ??Over_0
    534                  { 
    535                      tranSmooth = 0;
   \   0000005A   E000               LDI     R16, 0
   \   0000005C   9300....           STS     ??tranSmooth, R16
    536                      
    537                      for (uint8_t i = 0; i < 6; i++) 
   \   00000060   E020               LDI     R18, 0
   \   00000062   C01F               RJMP    ??Over_1
    538                      {
    539                          if (BitIsSet(changedDigit, i) || tranCounter == 0)
    540                          {
    541                              if(hour > 7) 
    542                                  level[i] = DayBright[tranCounter]; 
    543                              else 
    544                                  level[i] = NightBright[tranCounter];
   \                     ??Over_2:
   \   00000064   9100....           LDS     R16, tranCounter
   \   00000068   E010               LDI     R17, 0
   \   0000006A   01F8               MOVW    R31:R30, R17:R16
   \   0000006C   ....               SUBI    R30, LOW((-(NightBright) & 0xFFFF))
   \   0000006E   ....               SBCI    R31, (-(NightBright) & 0xFFFF) >> 8
   \   00000070   9104               LPM     R16, Z
   \   00000072   E030               LDI     R19, 0
   \   00000074   01F9               MOVW    R31:R30, R19:R18
   \   00000076   ....               SUBI    R30, LOW((-(level) & 0xFFFF))
   \   00000078   ....               SBCI    R31, (-(level) & 0xFFFF) >> 8
   \   0000007A   8300               ST      Z, R16
    545                          }
    546                          
    547                          if (tranCounter == 25/2 && settingsMode == 0)
   \                     ??Over_3:
   \   0000007C   9100....           LDS     R16, tranCounter
   \   00000080   300C               CPI     R16, 12
   \   00000082   F471               BRNE    ??Over_4
   \   00000084   9100....           LDS     R16, settingsMode
   \   00000088   2300               TST     R16
   \   0000008A   F451               BRNE    ??Over_4
    548                          {
    549                              out[i] = targetOut[i];  //on min brightness -> update digit
   \   0000008C   E030               LDI     R19, 0
   \   0000008E   01F9               MOVW    R31:R30, R19:R18
   \   00000090   ....               SUBI    R30, LOW((-(targetOut) & 0xFFFF))
   \   00000092   ....               SBCI    R31, (-(targetOut) & 0xFFFF) >> 8
   \   00000094   8100               LD      R16, Z
   \   00000096   E030               LDI     R19, 0
   \   00000098   01F9               MOVW    R31:R30, R19:R18
   \   0000009A   ....               SUBI    R30, LOW((-(`out`) & 0xFFFF))
   \   0000009C   ....               SBCI    R31, (-(`out`) & 0xFFFF) >> 8
   \   0000009E   8300               ST      Z, R16
    550                          }
   \                     ??Over_4:
   \   000000A0   9523               INC     R18
   \                     ??Over_1:
   \   000000A2   3026               CPI     R18, 6
   \   000000A4   F4F8               BRCC    ??Over_5
   \   000000A6   9130....           LDS     R19, changedDigit
   \   000000AA   2F42               MOV     R20, R18
   \   000000AC   E001               LDI     R16, 1
   \   000000AE   E010               LDI     R17, 0
   \   000000B0   ........           CALL    ?S_SHL_L02
   \   000000B4   2330               AND     R19, R16
   \   000000B6   2333               TST     R19
   \   000000B8   F421               BRNE    ??Over_6
   \   000000BA   9100....           LDS     R16, tranCounter
   \   000000BE   2300               TST     R16
   \   000000C0   F6E9               BRNE    ??Over_3
   \                     ??Over_6:
   \   000000C2   9100....           LDS     R16, hour
   \   000000C6   3008               CPI     R16, 8
   \   000000C8   F268               BRCS    ??Over_2
   \   000000CA   9100....           LDS     R16, tranCounter
   \   000000CE   E010               LDI     R17, 0
   \   000000D0   01F8               MOVW    R31:R30, R17:R16
   \   000000D2   ....               SUBI    R30, LOW((-(DayBright) & 0xFFFF))
   \   000000D4   ....               SBCI    R31, (-(DayBright) & 0xFFFF) >> 8
   \   000000D6   9104               LPM     R16, Z
   \   000000D8   E030               LDI     R19, 0
   \   000000DA   01F9               MOVW    R31:R30, R19:R18
   \   000000DC   ....               SUBI    R30, LOW((-(level) & 0xFFFF))
   \   000000DE   ....               SBCI    R31, (-(level) & 0xFFFF) >> 8
   \   000000E0   8300               ST      Z, R16
   \   000000E2   CFCC               RJMP    ??Over_3
    551                      }
    552                      
    553                      tranCounter++;
   \                     ??Over_5:
   \   000000E4   9100....           LDS     R16, tranCounter
   \   000000E8   9503               INC     R16
   \   000000EA   9300....           STS     tranCounter, R16
    554                   }
    555              }                
    556                  
    557          //BackLight: PWM
    558              static uint8_t pwmCnt = 0;      
    559              
    560              if(++pwmCnt > 6) 
   \                     ??Over_0:
   \   000000EE   9100....           LDS     R16, ??pwmCnt
   \   000000F2   9503               INC     R16
   \   000000F4   9300....           STS     ??pwmCnt, R16
   \   000000F8   3007               CPI     R16, 7
   \   000000FA   F1F8               BRCS    ??Over_7
    561              {
    562                  pwmCnt = 0;
   \   000000FC   E000               LDI     R16, 0
   \   000000FE   9300....           STS     ??pwmCnt, R16
    563                  
    564                  PORTD_Bit3 = PORTD_Bit6 = PORTC_Bit7 = PORTA_Bit6 = PORTB_Bit0 = PORTB_Bit1 = 0;  
   \   00000102   98C1               CBI     0x18, 0x01
   \   00000104   98C0               CBI     0x18, 0x00
   \   00000106   98DE               CBI     0x1B, 0x06
   \   00000108   98AF               CBI     0x15, 0x07
   \   0000010A   9896               CBI     0x12, 0x06
   \   0000010C   9893               CBI     0x12, 0x03
    565                  switch(counter)
   \   0000010E   9100....           LDS     R16, counter
   \   00000112   5000               SUBI    R16, 0
   \   00000114   F059               BREQ    ??Over_8
   \   00000116   950A               DEC     R16
   \   00000118   F059               BREQ    ??Over_9
   \   0000011A   950A               DEC     R16
   \   0000011C   F059               BREQ    ??Over_10
   \   0000011E   950A               DEC     R16
   \   00000120   F059               BREQ    ??Over_11
   \   00000122   950A               DEC     R16
   \   00000124   F059               BREQ    ??Over_12
   \   00000126   950A               DEC     R16
   \   00000128   F059               BREQ    ??Over_13
   \   0000012A   C00B               RJMP    ??Over_14
    566                  {
    567                      case 0: PORTD_Bit3=1; break;
   \                     ??Over_8:
   \   0000012C   9A93               SBI     0x12, 0x03
   \   0000012E   C009               RJMP    ??Over_14
    568                      case 1: PORTD_Bit6=1; break;
   \                     ??Over_9:
   \   00000130   9A96               SBI     0x12, 0x06
   \   00000132   C007               RJMP    ??Over_14
    569                      case 2: PORTC_Bit7=1; break;
   \                     ??Over_10:
   \   00000134   9AAF               SBI     0x15, 0x07
   \   00000136   C005               RJMP    ??Over_14
    570                      case 3: PORTA_Bit6=1; break;
   \                     ??Over_11:
   \   00000138   9ADE               SBI     0x1B, 0x06
   \   0000013A   C003               RJMP    ??Over_14
    571                      case 4: PORTB_Bit0=1; break;
   \                     ??Over_12:
   \   0000013C   9AC0               SBI     0x18, 0x00
   \   0000013E   C001               RJMP    ??Over_14
    572                      case 5: PORTB_Bit1=1; break;  
   \                     ??Over_13:
   \   00000140   9AC1               SBI     0x18, 0x01
    573                  }   
    574                  
    575                  OCR1A = outR[counter];
   \                     ??Over_14:
   \   00000142   9100....           LDS     R16, counter
   \   00000146   E010               LDI     R17, 0
   \   00000148   01F8               MOVW    R31:R30, R17:R16
   \   0000014A   ....               SUBI    R30, LOW((-(outR) & 0xFFFF))
   \   0000014C   ....               SBCI    R31, (-(outR) & 0xFFFF) >> 8
   \   0000014E   8100               LD      R16, Z
   \   00000150   E010               LDI     R17, 0
   \   00000152   BD1B               OUT     0x2B, R17
   \   00000154   BD0A               OUT     0x2A, R16
    576                  OCR0  = outG[counter];
   \   00000156   9100....           LDS     R16, counter
   \   0000015A   E010               LDI     R17, 0
   \   0000015C   01F8               MOVW    R31:R30, R17:R16
   \   0000015E   ....               SUBI    R30, LOW((-(outG) & 0xFFFF))
   \   00000160   ....               SBCI    R31, (-(outG) & 0xFFFF) >> 8
   \   00000162   8100               LD      R16, Z
   \   00000164   BF0C               OUT     0x3C, R16
    577                  OCR1B = outB[counter];
   \   00000166   9100....           LDS     R16, counter
   \   0000016A   E010               LDI     R17, 0
   \   0000016C   01F8               MOVW    R31:R30, R17:R16
   \   0000016E   ....               SUBI    R30, LOW((-(outB) & 0xFFFF))
   \   00000170   ....               SBCI    R31, (-(outB) & 0xFFFF) >> 8
   \   00000172   8100               LD      R16, Z
   \   00000174   E010               LDI     R17, 0
   \   00000176   BD19               OUT     0x29, R17
   \   00000178   BD08               OUT     0x28, R16
    578              }    
    579                  
    580          //Buttons  
    581              static uint16_t timerButton[3]={0,0,0};   //count++ while button pressed
    582          
    583              //Button #0  
    584              DDRB_Bit4 = 1; 
   \                     ??Over_7:
   \   0000017A   9ABC               SBI     0x17, 0x04
    585              PORTB_Bit4 = 0; 
   \   0000017C   98C4               CBI     0x18, 0x04
    586              DDRB_Bit4 = 0;    
   \   0000017E   98BC               CBI     0x17, 0x04
    587              __delay_cycles(15);
   \   00000180   E005               LDI     R16, 5
   \   00000182   950A               DEC     R16
   \   00000184   F7F1               BRNE    $-2
    588              
    589              if(PINB_Bit4 == 0) 
   \   00000186   99B4               SBIC    0x16, 0x04
   \   00000188   C009               RJMP    ??Over_15
    590                  timerButton[0]++; 
   \   0000018A   ....               LDI     R30, LOW(??timerButton)
   \   0000018C   ....               LDI     R31, (??timerButton) >> 8
   \   0000018E   8100               LD      R16, Z
   \   00000190   8111               LDD     R17, Z+1
   \   00000192   5F0F               SUBI    R16, 255
   \   00000194   4F1F               SBCI    R17, 255
   \   00000196   8300               ST      Z, R16
   \   00000198   8311               STD     Z+1, R17
   \   0000019A   C02F               RJMP    ??Over_16
    591              else
    592              {
    593                  if(timerButton[0] > 1000)           //settings mode - on long press
   \                     ??Over_15:
   \   0000019C   9100....           LDS     R16, ??timerButton
   \   000001A0   9110....           LDS     R17, (??timerButton + 1)
   \   000001A4   3E09               CPI     R16, 233
   \   000001A6   E023               LDI     R18, 3
   \   000001A8   0712               CPC     R17, R18
   \   000001AA   F080               BRCS    ??Over_17
    594                  { 
    595                      BitReset(button, 0);
   \   000001AC   ....               LDI     R30, LOW(button)
   \   000001AE   ....               LDI     R31, (button) >> 8
   \   000001B0   8100               LD      R16, Z
   \   000001B2   7F0E               ANDI    R16, 0xFE
   \   000001B4   8300               ST      Z, R16
    596                      timerButton[0] = protectKeys[0] = 0;
   \   000001B6   E000               LDI     R16, 0
   \   000001B8   9300....           STS     protectKeys, R16
   \   000001BC   E010               LDI     R17, 0
   \   000001BE   9300....           STS     ??timerButton, R16
   \   000001C2   9310....           STS     (??timerButton + 1), R17
    597                      
    598                      settingsFlag = 1; 
   \   000001C6   E001               LDI     R16, 1
   \   000001C8   9300....           STS     settingsFlag, R16
    599                  }
    600                  
    601                  if(timerButton[0] < 1000 && timerButton[0] > 200)
   \                     ??Over_17:
   \   000001CC   9100....           LDS     R16, ??timerButton
   \   000001D0   9110....           LDS     R17, (??timerButton + 1)
   \   000001D4   5C09               SUBI    R16, 201
   \   000001D6   4010               SBCI    R17, 0
   \   000001D8   310F               CPI     R16, 31
   \   000001DA   E023               LDI     R18, 3
   \   000001DC   0712               CPC     R17, R18
   \   000001DE   F468               BRCC    ??Over_16
    602                  { 
    603                      BitSet(button, 0);
   \   000001E0   ....               LDI     R30, LOW(button)
   \   000001E2   ....               LDI     R31, (button) >> 8
   \   000001E4   8100               LD      R16, Z
   \   000001E6   6001               ORI     R16, 0x01
   \   000001E8   8300               ST      Z, R16
    604                      timerButton[0] = protectKeys[0] = 0;
   \   000001EA   E000               LDI     R16, 0
   \   000001EC   9300....           STS     protectKeys, R16
   \   000001F0   E010               LDI     R17, 0
   \   000001F2   9300....           STS     ??timerButton, R16
   \   000001F6   9310....           STS     (??timerButton + 1), R17
    605                  }
    606              }   
    607                  
    608              //Button #1  
    609              DDRD_Bit7 = 1; 
   \                     ??Over_16:
   \   000001FA   9A8F               SBI     0x11, 0x07
    610              PORTD_Bit7 = 0; 
   \   000001FC   9897               CBI     0x12, 0x07
    611              DDRD_Bit7 = 0;     
   \   000001FE   988F               CBI     0x11, 0x07
    612              __delay_cycles(15);
   \   00000200   E005               LDI     R16, 5
   \   00000202   950A               DEC     R16
   \   00000204   F7F1               BRNE    $-2
    613              
    614              if(BitIsReset(PIND, 7))      
   \   00000206   9987               SBIC    0x10, 0x07
   \   00000208   C009               RJMP    ??Over_18
    615                  timerButton[1]++;    
   \   0000020A   ....               LDI     R30, LOW(??timerButton)
   \   0000020C   ....               LDI     R31, (??timerButton) >> 8
   \   0000020E   8102               LDD     R16, Z+2
   \   00000210   8113               LDD     R17, Z+3
   \   00000212   5F0F               SUBI    R16, 255
   \   00000214   4F1F               SBCI    R17, 255
   \   00000216   8302               STD     Z+2, R16
   \   00000218   8313               STD     Z+3, R17
   \   0000021A   C008               RJMP    ??Over_19
    616              else                    
    617              {
    618                  timerButton[1] = protectKeys[1] = 0;
   \                     ??Over_18:
   \   0000021C   E000               LDI     R16, 0
   \   0000021E   9300....           STS     (protectKeys + 1), R16
   \   00000222   E010               LDI     R17, 0
   \   00000224   9300....           STS     (??timerButton + 2), R16
   \   00000228   9310....           STS     (??timerButton + 3), R17
    619              }
    620              
    621              if(timerButton[1] == 150)   //240 - 100ms button non-reaction
   \                     ??Over_19:
   \   0000022C   9100....           LDS     R16, (??timerButton + 2)
   \   00000230   9110....           LDS     R17, (??timerButton + 3)
   \   00000234   3906               CPI     R16, 150
   \   00000236   E020               LDI     R18, 0
   \   00000238   0712               CPC     R17, R18
   \   0000023A   F459               BRNE    ??Over_20
    622              {
    623                  BitSet(button, 1); 
   \   0000023C   ....               LDI     R30, LOW(button)
   \   0000023E   ....               LDI     R31, (button) >> 8
   \   00000240   8100               LD      R16, Z
   \   00000242   6002               ORI     R16, 0x02
   \   00000244   8300               ST      Z, R16
    624                  timerButton[1] = 0;
   \   00000246   E000               LDI     R16, 0
   \   00000248   E010               LDI     R17, 0
   \   0000024A   9300....           STS     (??timerButton + 2), R16
   \   0000024E   9310....           STS     (??timerButton + 3), R17
    625              } 
    626              
    627              //Button #2  
    628              DDRB_Bit2 = 1; 
   \                     ??Over_20:
   \   00000252   9ABA               SBI     0x17, 0x02
    629              PORTB_Bit2 = 0; 
   \   00000254   98C2               CBI     0x18, 0x02
    630              DDRB_Bit2 = 0;    
   \   00000256   98BA               CBI     0x17, 0x02
    631              __delay_cycles(15);
   \   00000258   E005               LDI     R16, 5
   \   0000025A   950A               DEC     R16
   \   0000025C   F7F1               BRNE    $-2
    632              
    633              if(BitIsReset(PINB, 2))        
   \   0000025E   99B2               SBIC    0x16, 0x02
   \   00000260   C009               RJMP    ??Over_21
    634                  timerButton[2]++;    
   \   00000262   ....               LDI     R30, LOW(??timerButton)
   \   00000264   ....               LDI     R31, (??timerButton) >> 8
   \   00000266   8104               LDD     R16, Z+4
   \   00000268   8115               LDD     R17, Z+5
   \   0000026A   5F0F               SUBI    R16, 255
   \   0000026C   4F1F               SBCI    R17, 255
   \   0000026E   8304               STD     Z+4, R16
   \   00000270   8315               STD     Z+5, R17
   \   00000272   C008               RJMP    ??Over_22
    635              else                    
    636              {
    637                  timerButton[2] = protectKeys[2] = 0; 
   \                     ??Over_21:
   \   00000274   E000               LDI     R16, 0
   \   00000276   9300....           STS     (protectKeys + 2), R16
   \   0000027A   E010               LDI     R17, 0
   \   0000027C   9300....           STS     (??timerButton + 4), R16
   \   00000280   9310....           STS     (??timerButton + 5), R17
    638              }
    639              
    640              if(timerButton[2] == 150)   //240 - 100ms button non-reaction
   \                     ??Over_22:
   \   00000284   9100....           LDS     R16, (??timerButton + 4)
   \   00000288   9110....           LDS     R17, (??timerButton + 5)
   \   0000028C   3906               CPI     R16, 150
   \   0000028E   E020               LDI     R18, 0
   \   00000290   0712               CPC     R17, R18
   \   00000292   F459               BRNE    ??Over_23
    641              {
    642                  BitSet(button, 2); 
   \   00000294   ....               LDI     R30, LOW(button)
   \   00000296   ....               LDI     R31, (button) >> 8
   \   00000298   8100               LD      R16, Z
   \   0000029A   6004               ORI     R16, 0x04
   \   0000029C   8300               ST      Z, R16
    643                  timerButton[2] = 0;
   \   0000029E   E000               LDI     R16, 0
   \   000002A0   E010               LDI     R17, 0
   \   000002A2   9300....           STS     (??timerButton + 4), R16
   \   000002A6   9310....           STS     (??timerButton + 5), R17
    644              } 
    645             
    646              
    647              //debounce implementation
    648              for(uint8_t i=0; i<3; i++)
   \                     ??Over_23:
   \   000002AA   E020               LDI     R18, 0
   \   000002AC   C013               RJMP    ??Over_24
    649              {
    650                  //protectKeys=1 -> debounce 100ms
    651                  if(protectKeys[i]) BitReset(button, i);
   \                     ??Over_25:
   \   000002AE   E030               LDI     R19, 0
   \   000002B0   01F9               MOVW    R31:R30, R19:R18
   \   000002B2   ....               SUBI    R30, LOW((-(protectKeys) & 0xFFFF))
   \   000002B4   ....               SBCI    R31, (-(protectKeys) & 0xFFFF) >> 8
   \   000002B6   8100               LD      R16, Z
   \   000002B8   2300               TST     R16
   \   000002BA   F059               BREQ    ??Over_26
   \   000002BC   2F42               MOV     R20, R18
   \   000002BE   E001               LDI     R16, 1
   \   000002C0   E010               LDI     R17, 0
   \   000002C2   ........           CALL    ?S_SHL_L02
   \   000002C6   9500               COM     R16
   \   000002C8   9110....           LDS     R17, button
   \   000002CC   2310               AND     R17, R16
   \   000002CE   9310....           STS     button, R17
    652              }
   \                     ??Over_26:
   \   000002D2   9523               INC     R18
   \                     ??Over_24:
   \   000002D4   3023               CPI     R18, 3
   \   000002D6   F358               BRCS    ??Over_25
    653              
    654          
    655              static uint8_t counterBtn = 0;    
    656              if(++counterBtn >= 240)                 
   \   000002D8   9100....           LDS     R16, ??counterBtn
   \   000002DC   9503               INC     R16
   \   000002DE   9300....           STS     ??counterBtn, R16
   \   000002E2   3F00               CPI     R16, 240
   \   000002E4   F0F0               BRCS    ??Over_27
    657              {
    658                  counterBtn = 0;
   \   000002E6   E000               LDI     R16, 0
   \   000002E8   9300....           STS     ??counterBtn, R16
    659                  
    660                  if(protectKeys[0]) protectKeys[0]--;
   \   000002EC   9100....           LDS     R16, protectKeys
   \   000002F0   2300               TST     R16
   \   000002F2   F029               BREQ    ??Over_28
   \   000002F4   9100....           LDS     R16, protectKeys
   \   000002F8   950A               DEC     R16
   \   000002FA   9300....           STS     protectKeys, R16
    661                  if(protectKeys[1]) protectKeys[1]--;
   \                     ??Over_28:
   \   000002FE   9100....           LDS     R16, (protectKeys + 1)
   \   00000302   2300               TST     R16
   \   00000304   F029               BREQ    ??Over_29
   \   00000306   9100....           LDS     R16, (protectKeys + 1)
   \   0000030A   950A               DEC     R16
   \   0000030C   9300....           STS     (protectKeys + 1), R16
    662                  if(protectKeys[2]) protectKeys[2]--;
   \                     ??Over_29:
   \   00000310   9100....           LDS     R16, (protectKeys + 2)
   \   00000314   2300               TST     R16
   \   00000316   F029               BREQ    ??Over_27
   \   00000318   9100....           LDS     R16, (protectKeys + 2)
   \   0000031C   950A               DEC     R16
   \   0000031E   9300....           STS     (protectKeys + 2), R16
    663              }    
    664          
    665          //BackLight: wait time counters    
    666              for(uint8_t i=0; i<18; i++)
   \                     ??Over_27:
   \   00000322   E040               LDI     R20, 0
   \   00000324   C01B               RJMP    ??Over_30
    667              {
    668                  if(smooth[i].waitTimer)  smooth[i].waitTimer--;
   \                     ??Over_31:
   \   00000326   E050               LDI     R21, 0
   \   00000328   E006               LDI     R16, 6
   \   0000032A   E010               LDI     R17, 0
   \   0000032C   ........           CALL    ?S_EC_MUL_L02
   \   00000330   01F8               MOVW    R31:R30, R17:R16
   \   00000332   ....               SUBI    R30, LOW((-(smooth) & 0xFFFF))
   \   00000334   ....               SBCI    R31, (-(smooth) & 0xFFFF) >> 8
   \   00000336   8104               LDD     R16, Z+4
   \   00000338   8115               LDD     R17, Z+5
   \   0000033A   2B01               OR      R16, R17
   \   0000033C   F071               BREQ    ??Over_32
   \   0000033E   E050               LDI     R21, 0
   \   00000340   E006               LDI     R16, 6
   \   00000342   E010               LDI     R17, 0
   \   00000344   ........           CALL    ?S_EC_MUL_L02
   \   00000348   01F8               MOVW    R31:R30, R17:R16
   \   0000034A   ....               SUBI    R30, LOW((-(smooth) & 0xFFFF))
   \   0000034C   ....               SBCI    R31, (-(smooth) & 0xFFFF) >> 8
   \   0000034E   8104               LDD     R16, Z+4
   \   00000350   8115               LDD     R17, Z+5
   \   00000352   5001               SUBI    R16, 1
   \   00000354   4010               SBCI    R17, 0
   \   00000356   8304               STD     Z+4, R16
   \   00000358   8315               STD     Z+5, R17
    669              }
   \                     ??Over_32:
   \   0000035A   9543               INC     R20
   \                     ??Over_30:
   \   0000035C   3142               CPI     R20, 18
   \   0000035E   F318               BRCS    ??Over_31
    670          }
   \   00000360   BF6F               OUT     0x3F, R22
   \   00000362   9109               LD      R16, Y+
   \   00000364   9119               LD      R17, Y+
   \   00000366   9129               LD      R18, Y+
   \   00000368   9139               LD      R19, Y+
   \   0000036A   9149               LD      R20, Y+
   \   0000036C   9159               LD      R21, Y+
   \   0000036E   9169               LD      R22, Y+
   \   00000370   9009               LD      R0, Y+
   \   00000372   9019               LD      R1, Y+
   \   00000374   91E9               LD      R30, Y+
   \   00000376   91F9               LD      R31, Y+
   \   00000378   9518               RETI
   \   0000037A                      REQUIRE _A_PORTC
   \   0000037A                      REQUIRE _A_PORTA
   \   0000037A                      REQUIRE _A_OCR2
   \   0000037A                      REQUIRE _A_PORTD
   \   0000037A                      REQUIRE _A_PORTB
   \   0000037A                      REQUIRE _A_OCR1A
   \   0000037A                      REQUIRE _A_OCR0
   \   0000037A                      REQUIRE _A_OCR1B
   \   0000037A                      REQUIRE _A_DDRB
   \   0000037A                      REQUIRE _A_PINB
   \   0000037A                      REQUIRE _A_DDRD
   \   0000037A                      REQUIRE _A_PIND

   \                                 In  segment NEAR_Z, align 1, keep-with-next
   \   00000000                      REQUIRE `?<Segment init: NEAR_Z>`
   \                     ??tranSmooth:
   \   00000000                      DS8 1

   \                                 In  segment NEAR_Z, align 1, keep-with-next
   \   00000000                      REQUIRE `?<Segment init: NEAR_Z>`
   \                     ??pwmCnt:
   \   00000000                      DS8 1

   \                                 In  segment NEAR_Z, align 1, keep-with-next
   \   00000000                      REQUIRE `?<Segment init: NEAR_Z>`
   \                     ??timerButton:
   \   00000000                      DS8 6

   \                                 In  segment NEAR_Z, align 1, keep-with-next
   \   00000000                      REQUIRE `?<Segment init: NEAR_Z>`
   \                     ??counterBtn:
   \   00000000                      DS8 1
    671          
    672          
    673          
    674          
    675          /*******************************************************************************
    676          * Function Name  : Compare
    677          * Description    : Timer2 compare handler: PWM digits
    678          *******************************************************************************/
    679          #pragma vector = TIMER2_COMP_vect 

   \                                 In  segment CODE, align 2, keep-with-next
    680          __interrupt void Compare() //       
   \                     Compare:
    681          {  
   \   00000000   93FA               ST      -Y, R31
   \   00000002   93EA               ST      -Y, R30
   \   00000004   932A               ST      -Y, R18
   \   00000006   931A               ST      -Y, R17
   \   00000008   930A               ST      -Y, R16
   \   0000000A   B72F               IN      R18, 0x3F
    682          //Anode commutations
    683              if(counter==0 || counter==3) 
   \   0000000C   9100....           LDS     R16, counter
   \   00000010   2300               TST     R16
   \   00000012   F021               BREQ    ??Compare_0
   \   00000014   9100....           LDS     R16, counter
   \   00000018   3003               CPI     R16, 3
   \   0000001A   F419               BRNE    ??Compare_1
    684              {
    685                  PORTD_Bit1 = 1; 
   \                     ??Compare_0:
   \   0000001C   9A91               SBI     0x12, 0x01
    686                  PORTD_Bit0 = 0; 
   \   0000001E   9890               CBI     0x12, 0x00
    687                  PORTA_Bit7 = 0;
   \   00000020   98DF               CBI     0x1B, 0x07
    688              }
    689              
    690              if(counter==1 || counter==4) 
   \                     ??Compare_1:
   \   00000022   9100....           LDS     R16, counter
   \   00000026   3001               CPI     R16, 1
   \   00000028   F021               BREQ    ??Compare_2
   \   0000002A   9100....           LDS     R16, counter
   \   0000002E   3004               CPI     R16, 4
   \   00000030   F419               BRNE    ??Compare_3
    691              {
    692                  PORTD_Bit1 = 0; 
   \                     ??Compare_2:
   \   00000032   9891               CBI     0x12, 0x01
    693                  PORTD_Bit0 = 1; 
   \   00000034   9A90               SBI     0x12, 0x00
    694                  PORTA_Bit7 = 0;
   \   00000036   98DF               CBI     0x1B, 0x07
    695              }
    696              
    697              if(counter==2 || counter==5) 
   \                     ??Compare_3:
   \   00000038   9100....           LDS     R16, counter
   \   0000003C   3002               CPI     R16, 2
   \   0000003E   F021               BREQ    ??Compare_4
   \   00000040   9100....           LDS     R16, counter
   \   00000044   3005               CPI     R16, 5
   \   00000046   F419               BRNE    ??Compare_5
    698              {
    699                  PORTD_Bit1 = 0; 
   \                     ??Compare_4:
   \   00000048   9891               CBI     0x12, 0x01
    700                  PORTD_Bit0 = 0; 
   \   0000004A   9890               CBI     0x12, 0x00
    701                  PORTA_Bit7 = 1;
   \   0000004C   9ADF               SBI     0x1B, 0x07
    702              }
    703          
    704          //DC: left
    705              if(digit < 3)//   -  
   \                     ??Compare_5:
   \   0000004E   9100....           LDS     R16, digit
   \   00000052   3003               CPI     R16, 3
   \   00000054   F008               BRCS    $+2+2
   \   00000056   C041               RJMP    ??Compare_6
    706              {
    707                  PORTC_Bit4 = DC[0][ out[digit] ]; 
   \   00000058   9100....           LDS     R16, digit
   \   0000005C   E010               LDI     R17, 0
   \   0000005E   01F8               MOVW    R31:R30, R17:R16
   \   00000060   ....               SUBI    R30, LOW((-(`out`) & 0xFFFF))
   \   00000062   ....               SBCI    R31, (-(`out`) & 0xFFFF) >> 8
   \   00000064   8100               LD      R16, Z
   \   00000066   E010               LDI     R17, 0
   \   00000068   01F8               MOVW    R31:R30, R17:R16
   \   0000006A   ....               SUBI    R30, LOW((-(DC) & 0xFFFF))
   \   0000006C   ....               SBCI    R31, (-(DC) & 0xFFFF) >> 8
   \   0000006E   9104               LPM     R16, Z
   \   00000070   FB00               BST     R16, 0
   \   00000072   B305               IN      R16, 0x15
   \   00000074   F904               BLD     R16, 4
   \   00000076   BB05               OUT     0x15, R16
    708                  PORTC_Bit2 = DC[1][ out[digit] ]; 
   \   00000078   9100....           LDS     R16, digit
   \   0000007C   E010               LDI     R17, 0
   \   0000007E   01F8               MOVW    R31:R30, R17:R16
   \   00000080   ....               SUBI    R30, LOW((-(`out`) & 0xFFFF))
   \   00000082   ....               SBCI    R31, (-(`out`) & 0xFFFF) >> 8
   \   00000084   8100               LD      R16, Z
   \   00000086   E010               LDI     R17, 0
   \   00000088   01F8               MOVW    R31:R30, R17:R16
   \   0000008A   ....               SUBI    R30, LOW((-(DC + 22) & 0xFFFF))
   \   0000008C   ....               SBCI    R31, HIGH((-(DC + 22) & 0xFFFF))
   \   0000008E   9104               LPM     R16, Z
   \   00000090   FB00               BST     R16, 0
   \   00000092   B305               IN      R16, 0x15
   \   00000094   F902               BLD     R16, 2
   \   00000096   BB05               OUT     0x15, R16
    709                  PORTC_Bit3 = DC[2][ out[digit] ]; 
   \   00000098   9100....           LDS     R16, digit
   \   0000009C   E010               LDI     R17, 0
   \   0000009E   01F8               MOVW    R31:R30, R17:R16
   \   000000A0   ....               SUBI    R30, LOW((-(`out`) & 0xFFFF))
   \   000000A2   ....               SBCI    R31, (-(`out`) & 0xFFFF) >> 8
   \   000000A4   8100               LD      R16, Z
   \   000000A6   E010               LDI     R17, 0
   \   000000A8   01F8               MOVW    R31:R30, R17:R16
   \   000000AA   ....               SUBI    R30, LOW((-(DC + 44) & 0xFFFF))
   \   000000AC   ....               SBCI    R31, HIGH((-(DC + 44) & 0xFFFF))
   \   000000AE   9104               LPM     R16, Z
   \   000000B0   FB00               BST     R16, 0
   \   000000B2   B305               IN      R16, 0x15
   \   000000B4   F903               BLD     R16, 3
   \   000000B6   BB05               OUT     0x15, R16
    710                  PORTC_Bit5 = DC[3][ out[digit] ];
   \   000000B8   9100....           LDS     R16, digit
   \   000000BC   E010               LDI     R17, 0
   \   000000BE   01F8               MOVW    R31:R30, R17:R16
   \   000000C0   ....               SUBI    R30, LOW((-(`out`) & 0xFFFF))
   \   000000C2   ....               SBCI    R31, (-(`out`) & 0xFFFF) >> 8
   \   000000C4   8100               LD      R16, Z
   \   000000C6   E010               LDI     R17, 0
   \   000000C8   01F8               MOVW    R31:R30, R17:R16
   \   000000CA   ....               SUBI    R30, LOW((-(DC + 66) & 0xFFFF))
   \   000000CC   ....               SBCI    R31, HIGH((-(DC + 66) & 0xFFFF))
   \   000000CE   9104               LPM     R16, Z
   \   000000D0   FB00               BST     R16, 0
   \   000000D2   B305               IN      R16, 0x15
   \   000000D4   F905               BLD     R16, 5
   \   000000D6   BB05               OUT     0x15, R16
   \   000000D8   C040               RJMP    ??Compare_7
    711              }
    712          //DC: right
    713              else
    714              {
    715                  PORTA_Bit1 = DC[0][ 11+out[digit] ]; 
   \                     ??Compare_6:
   \   000000DA   9100....           LDS     R16, digit
   \   000000DE   E010               LDI     R17, 0
   \   000000E0   01F8               MOVW    R31:R30, R17:R16
   \   000000E2   ....               SUBI    R30, LOW((-(`out`) & 0xFFFF))
   \   000000E4   ....               SBCI    R31, (-(`out`) & 0xFFFF) >> 8
   \   000000E6   8100               LD      R16, Z
   \   000000E8   E010               LDI     R17, 0
   \   000000EA   01F8               MOVW    R31:R30, R17:R16
   \   000000EC   ....               SUBI    R30, LOW((-(DC + 11) & 0xFFFF))
   \   000000EE   ....               SBCI    R31, HIGH((-(DC + 11) & 0xFFFF))
   \   000000F0   9104               LPM     R16, Z
   \   000000F2   FB00               BST     R16, 0
   \   000000F4   B30B               IN      R16, 0x1B
   \   000000F6   F901               BLD     R16, 1
   \   000000F8   BB0B               OUT     0x1B, R16
    716                  PORTA_Bit3 = DC[1][ 11+out[digit] ]; 
   \   000000FA   9100....           LDS     R16, digit
   \   000000FE   E010               LDI     R17, 0
   \   00000100   01F8               MOVW    R31:R30, R17:R16
   \   00000102   ....               SUBI    R30, LOW((-(`out`) & 0xFFFF))
   \   00000104   ....               SBCI    R31, (-(`out`) & 0xFFFF) >> 8
   \   00000106   8100               LD      R16, Z
   \   00000108   E010               LDI     R17, 0
   \   0000010A   01F8               MOVW    R31:R30, R17:R16
   \   0000010C   ....               SUBI    R30, LOW((-(DC + 33) & 0xFFFF))
   \   0000010E   ....               SBCI    R31, HIGH((-(DC + 33) & 0xFFFF))
   \   00000110   9104               LPM     R16, Z
   \   00000112   FB00               BST     R16, 0
   \   00000114   B30B               IN      R16, 0x1B
   \   00000116   F903               BLD     R16, 3
   \   00000118   BB0B               OUT     0x1B, R16
    717                  PORTA_Bit2 = DC[2][ 11+out[digit] ]; 
   \   0000011A   9100....           LDS     R16, digit
   \   0000011E   E010               LDI     R17, 0
   \   00000120   01F8               MOVW    R31:R30, R17:R16
   \   00000122   ....               SUBI    R30, LOW((-(`out`) & 0xFFFF))
   \   00000124   ....               SBCI    R31, (-(`out`) & 0xFFFF) >> 8
   \   00000126   8100               LD      R16, Z
   \   00000128   E010               LDI     R17, 0
   \   0000012A   01F8               MOVW    R31:R30, R17:R16
   \   0000012C   ....               SUBI    R30, LOW((-(DC + 55) & 0xFFFF))
   \   0000012E   ....               SBCI    R31, HIGH((-(DC + 55) & 0xFFFF))
   \   00000130   9104               LPM     R16, Z
   \   00000132   FB00               BST     R16, 0
   \   00000134   B30B               IN      R16, 0x1B
   \   00000136   F902               BLD     R16, 2
   \   00000138   BB0B               OUT     0x1B, R16
    718                  PORTA_Bit0 = DC[3][ 11+out[digit] ];
   \   0000013A   9100....           LDS     R16, digit
   \   0000013E   E010               LDI     R17, 0
   \   00000140   01F8               MOVW    R31:R30, R17:R16
   \   00000142   ....               SUBI    R30, LOW((-(`out`) & 0xFFFF))
   \   00000144   ....               SBCI    R31, (-(`out`) & 0xFFFF) >> 8
   \   00000146   8100               LD      R16, Z
   \   00000148   E010               LDI     R17, 0
   \   0000014A   01F8               MOVW    R31:R30, R17:R16
   \   0000014C   ....               SUBI    R30, LOW((-(DC + 77) & 0xFFFF))
   \   0000014E   ....               SBCI    R31, HIGH((-(DC + 77) & 0xFFFF))
   \   00000150   9104               LPM     R16, Z
   \   00000152   FB00               BST     R16, 0
   \   00000154   B30B               IN      R16, 0x1B
   \   00000156   F900               BLD     R16, 0
   \   00000158   BB0B               OUT     0x1B, R16
    719              }              
    720          
    721          //Digit counters
    722              if(++counter == 6) counter = 0;
   \                     ??Compare_7:
   \   0000015A   9100....           LDS     R16, counter
   \   0000015E   9503               INC     R16
   \   00000160   9300....           STS     counter, R16
   \   00000164   3006               CPI     R16, 6
   \   00000166   F419               BRNE    ??Compare_8
   \   00000168   E000               LDI     R16, 0
   \   0000016A   9300....           STS     counter, R16
    723              if(counter <  3) digit = counter;
   \                     ??Compare_8:
   \   0000016E   9100....           LDS     R16, counter
   \   00000172   3003               CPI     R16, 3
   \   00000174   F420               BRCC    ??Compare_9
   \   00000176   9100....           LDS     R16, counter
   \   0000017A   9300....           STS     digit, R16
    724              if(counter >= 3) digit = 8 - counter;
   \                     ??Compare_9:
   \   0000017E   9100....           LDS     R16, counter
   \   00000182   3003               CPI     R16, 3
   \   00000184   F030               BRCS    ??Compare_10
   \   00000186   E008               LDI     R16, 8
   \   00000188   9110....           LDS     R17, counter
   \   0000018C   1B01               SUB     R16, R17
   \   0000018E   9300....           STS     digit, R16
    725          }
   \                     ??Compare_10:
   \   00000192   BF2F               OUT     0x3F, R18
   \   00000194   9109               LD      R16, Y+
   \   00000196   9119               LD      R17, Y+
   \   00000198   9129               LD      R18, Y+
   \   0000019A   91E9               LD      R30, Y+
   \   0000019C   91F9               LD      R31, Y+
   \   0000019E   9518               RETI
   \   000001A0                      REQUIRE _A_PORTD
   \   000001A0                      REQUIRE _A_PORTA
   \   000001A0                      REQUIRE _A_PORTC
    726          
    727          
    728          
    729          /*******************************************************************************
    730          * Function Name  : Update
    731          * Description    : INT0 handler: 1Hz update command from DS1307
    732          *******************************************************************************/
    733          #pragma vector = INT0_vect 

   \                                 In  segment CODE, align 2, keep-with-next
    734          __interrupt void Update()
   \                     Update:
    735          { 
   \   00000000   931A               ST      -Y, R17
   \   00000002   930A               ST      -Y, R16
   \   00000004   B71F               IN      R17, 0x3F
    736              Global1HzFlag = 1;
   \   00000006   E001               LDI     R16, 1
   \   00000008   9300....           STS     Global1HzFlag, R16
    737          }
   \   0000000C   BF1F               OUT     0x3F, R17
   \   0000000E   9109               LD      R16, Y+
   \   00000010   9119               LD      R17, Y+
   \   00000012   9518               RETI

   \                                 In  segment INTVEC, offset 0x4, root
   \                     `??Update??INTVEC 4`:
   \   00000004   ........           JMP     Update

   \                                 In  segment INTVEC, offset 0xc, root
   \                     `??Compare??INTVEC 12`:
   \   0000000C   ........           JMP     Compare

   \                                 In  segment INTVEC, offset 0x10, root
   \                     `??Over??INTVEC 16`:
   \   00000010   ........           JMP     Over

   \                                 In  segment NEAR_ID, align 1, keep-with-next
   \                     `?<Initializer for out>`:
   \   00000000   0A0A0A0A0A0A       DC8 10, 10, 10, 10, 10, 10

   \                                 In  segment NEAR_ID, align 1, keep-with-next
   \                     `?<Initializer for level>`:
   \   00000000   000100000000       DC8 1, 0, 0, 0, 0, 0

   \                                 In  segment SWITCH, align 2, keep-with-next
   \                     `?<Jumptable for Settings>_0`:
   \   00000000   01                 DB      1
   \   00000001   00                 DB      0
   \   00000002   ....               DW      (??Settings_2) /2
   \   00000004   000A               DW      10
   \   00000006   ....               DW      (??Settings_1) /2
   \   00000008   ....               DW      (??Settings_3) /2
   \   0000000A   ....               DW      (??Settings_4) /2
   \   0000000C   ....               DW      (??Settings_5) /2
   \   0000000E   ....               DW      (??Settings_6) /2
   \   00000010   ....               DW      (??Settings_7) /2
   \   00000012   ....               DW      (??Settings_8) /2
   \   00000014   ....               DW      (??Settings_9) /2
   \   00000016   ....               DW      (??Settings_10) /2
   \   00000018   ....               DW      (??Settings_11) /2

   \                                 In  segment SWITCH, align 2, keep-with-next
   \                     `?<Jumptable for Settings>_1`:
   \   00000000   01                 DB      1
   \   00000001   00                 DB      0
   \   00000002   ....               DW      (??Settings_2) /2
   \   00000004   000A               DW      10
   \   00000006   ....               DW      (??Settings_12) /2
   \   00000008   ....               DW      (??Settings_13) /2
   \   0000000A   ....               DW      (??Settings_14) /2
   \   0000000C   ....               DW      (??Settings_15) /2
   \   0000000E   ....               DW      (??Settings_16) /2
   \   00000010   ....               DW      (??Settings_17) /2
   \   00000012   ....               DW      (??Settings_18) /2
   \   00000014   ....               DW      (??Settings_19) /2
   \   00000016   ....               DW      (??Settings_20) /2
   \   00000018   ....               DW      (??Settings_21) /2

   \                                 In  segment SWITCH, align 2, keep-with-next
   \                     `?<Jumptable for Settings>_2`:
   \   00000000   01                 DB      1
   \   00000001   00                 DB      0
   \   00000002   ....               DW      (??Settings_22) /2
   \   00000004   000A               DW      10
   \   00000006   ....               DW      (??Settings_23) /2
   \   00000008   ....               DW      (??Settings_25) /2
   \   0000000A   ....               DW      (??Settings_27) /2
   \   0000000C   ....               DW      (??Settings_28) /2
   \   0000000E   ....               DW      (??Settings_30) /2
   \   00000010   ....               DW      (??Settings_31) /2
   \   00000012   ....               DW      (??Settings_32) /2
   \   00000014   ....               DW      (??Settings_33) /2
   \   00000016   ....               DW      (??Settings_34) /2
   \   00000018   ....               DW      (??Settings_35) /2

   \                                 In  segment SWITCH, align 2, keep-with-next
   \                     `?<Jumptable for Settings>_3`:
   \   00000000   01                 DB      1
   \   00000001   00                 DB      0
   \   00000002   ....               DW      (??Settings_36) /2
   \   00000004   000A               DW      10
   \   00000006   ....               DW      (??Settings_37) /2
   \   00000008   ....               DW      (??Settings_39) /2
   \   0000000A   ....               DW      (??Settings_41) /2
   \   0000000C   ....               DW      (??Settings_42) /2
   \   0000000E   ....               DW      (??Settings_44) /2
   \   00000010   ....               DW      (??Settings_45) /2
   \   00000012   ....               DW      (??Settings_46) /2
   \   00000014   ....               DW      (??Settings_47) /2
   \   00000016   ....               DW      (??Settings_48) /2
   \   00000018   ....               DW      (??Settings_49) /2

   \                                 In  segment SWITCH, align 2, keep-with-next
   \                     `?<Jumptable for Buttons>_0`:
   \   00000000   01                 DB      1
   \   00000001   00                 DB      0
   \   00000002   ....               DW      (??Buttons_5) /2
   \   00000004   000A               DW      10
   \   00000006   ....               DW      (??Buttons_4) /2
   \   00000008   ....               DW      (??Buttons_6) /2
   \   0000000A   ....               DW      (??Buttons_7) /2
   \   0000000C   ....               DW      (??Buttons_8) /2
   \   0000000E   ....               DW      (??Buttons_9) /2
   \   00000010   ....               DW      (??Buttons_10) /2
   \   00000012   ....               DW      (??Buttons_11) /2
   \   00000014   ....               DW      (??Buttons_12) /2
   \   00000016   ....               DW      (??Buttons_13) /2
   \   00000018   ....               DW      (??Buttons_14) /2

   Maximum stack usage in bytes:

     Function                CSTACK RSTACK
     --------                ------ ------
     Buttons                     0      4
       -> BackLightChange        0      2
       -> DS1307SetTime          0      2
       -> DS1307SetDate          0      2
       -> ZeroBL                 0      2
       -> BLGetType              0      2
       -> GetDate                0      2
       -> GetDate                0      2
       -> GetDate                0      2
       -> BinaryChangeEffect     0      2
       -> GetDate                0      2
       -> GetDate                0      2
       -> HSVchange              0      2
       -> BLGetType              0      2
       -> GetDate                0      2
       -> GetDate                0      2
       -> GetDate                0      2
       -> BinaryChangeEffect     0      2
       -> GetDate                0      2
       -> GetDate                0      2
       -> HSVchange              0      2
     Compare                     5      2
     GetDate                     0      2
       -> ZeroBL                 0      2
       -> DS1307GetDate          0      2
       -> Sprint                 0      2
     Initialization              0      4
       -> DS1307Init             0      2
       -> RandomGet4             0      2
       -> srand                  0      2
       -> DS1307GetDate          0      2
       -> DS1307GetTime          0      2
       -> DS1307SetDate          0      2
       -> DS1307SetTime          0      2
       -> ZeroBL                 0      2
     Over                       11      4
     RandomGet                   2      2
       -> rand                   2      2
     RandomGet4                  2      4
       -> rand                   2      2
     Settings                    0      4
     Update                      2      2
     main                        1      4
       -> Initialization         1      2
       -> SmoothInit             1      2
       -> ZeroBL                 1      2
       -> DS1307GetTime          1      2
       -> Soft                   1      2
       -> MixBLReduceTime        1      2
       -> Settings               1      2
       -> BackLightProcess       1      2
       -> Buttons                1      2


   Segment part sizes:

     Function/Label              Bytes
     --------------              -----
     _A_OCR0                        1
     _A_GICR                        1
     _A_TIMSK                       1
     _A_MCUCR                       1
     _A_TCCR0                       1
     _A_SFIOR                       1
     _A_TCCR1A                      1
     _A_TCCR1B                      1
     _A_OCR1A                       2
     _A_OCR1B                       2
     _A_TCCR2                       1
     _A_OCR2                        1
     _A_PORTA                       1
     _A_DDRA                        1
     _A_PORTB                       1
     _A_DDRB                        1
     _A_PINB                        1
     _A_PORTC                       1
     _A_DDRC                        1
     _A_PORTD                       1
     _A_DDRD                        1
     _A_PIND                        1
     _A_ADMUX                       1
     _A_ADCSRA                      1
     _A_ADC                         2
     DayBright                     25
     NightBright                   25
     DC                            88
     eLEADZERO                      1
     eSEPARATOR                     1
     eMIX_DELAY                     1
     eBL_MODE                       1
     settingsMode                   1
     settingsFlag                   1
     Global1HzFlag                  1
     outR                           6
     outG                           6
     outB                           6
     button                         1
     protectKeys                    3
     counter                        1
     digit                          1
     hour                           1
     min                            1
     sec                            1
     day                            1
     mon                            1
     year                           1
     out                            6
     targetOut                      6
     changedDigit                   1
     tranCounter                    1
     level                          6
     RandomGet                     34
     RandomGet4                   136
     Initialization               378
     GetDate                       82
     Settings                     924
     Buttons                      852
     main                         178
     Over                         890
     tranSmooth                     1
     pwmCnt                         1
     timerButton                    6
     counterBtn                     1
     Compare                      416
     Update                        20
     ??Update??INTVEC 4             4
     ??Compare??INTVEC 12           4
     ??Over??INTVEC 16              4
     ?<Initializer for out>         6
     ?<Initializer for level>       6
     ?<Jumptable for Settings>_0   26
     ?<Jumptable for Settings>_1   26
     ?<Jumptable for Settings>_2   26
     ?<Jumptable for Settings>_3   26
     ?<Jumptable for Buttons>_0    26
      Others                       12

 
    28 bytes in segment ABSOLUTE
 3 910 bytes in segment CODE
     4 bytes in segment EEPROM_N
    12 bytes in segment INITTAB
    12 bytes in segment INTVEC
   138 bytes in segment NEAR_F
    12 bytes in segment NEAR_I
    12 bytes in segment NEAR_ID
    50 bytes in segment NEAR_Z
   130 bytes in segment SWITCH
 
 4 190 bytes of CODE  memory (+ 24 bytes shared)
    62 bytes of DATA  memory (+ 28 bytes shared)
     4 bytes of XDATA memory

Errors: none
Warnings: none
