###############################################################################
#                                                                             #
# IAR C/C++ Compiler V6.10.1.50424 for Atmel AVR        19/Nov/2014  09:16:08 #
# Copyright 1996-2011 IAR Systems AB.                                         #
#                                                                             #
#    Source file  =  H:\WORKSPACE\NixieClock2\transient.c                     #
#    Command line =  H:\WORKSPACE\NixieClock2\transient.c --cpu=m16 -ms -o    #
#                    H:\WORKSPACE\NixieClock2\Debug\Obj\ -lC                  #
#                    H:\WORKSPACE\NixieClock2\Debug\List\                     #
#                    --initializers_in_flash --no_cse --no_inline             #
#                    --no_code_motion --no_cross_call --no_clustering         #
#                    --no_tbaa --debug -DENABLE_BIT_DEFINITIONS -e            #
#                    --eeprom_size 512 --clib -Ol                             #
#    List file    =  H:\WORKSPACE\NixieClock2\Debug\List\transient.lst        #
#    Object file  =  H:\WORKSPACE\NixieClock2\Debug\Obj\transient.r90         #
#                                                                             #
#                                                                             #
###############################################################################

H:\WORKSPACE\NixieClock2\transient.c
      1          /* Includes ------------------------------------------------------------------*/
      2          #include "all.h"
      3          #include "ds1307.h"
      4          #include "transient.h"
      5          #include "backlight.h"
      6          
      7          
      8          /* Private typedef -----------------------------------------------------------*/
      9          /* Private define ------------------------------------------------------------*/
     10          /* Private macro -------------------------------------------------------------*/
     11          /* Private variables ---------------------------------------------------------*/
     12          /* Extern variables ----------------------------------------------------------*/
     13          extern __eeprom __no_init uint8_t eLEADZERO;
     14          extern volatile uint8_t settingsMode;
     15          
     16          extern volatile uint8_t out[6];
     17          extern  uint8_t targetOut[6];
     18          
     19          extern volatile uint8_t tranCounter;
     20          extern volatile uint8_t changedDigit;
     21          
     22          
     23          /* Private function prototypes -----------------------------------------------*/
     24          /* Private functions ---------------------------------------------------------*/
     25          /*******************************************************************************
     26          * Function Name  : Soft
     27          * Description    : Smooth update of nubmers
     28          * Input          : Three numbers to display next
     29          *******************************************************************************/

   \                                 In  segment CODE, align 2, keep-with-next
     30          void Soft(uint8_t Num1, uint8_t Num2, uint8_t Num3) 
   \                     Soft:
     31          {     
   \   00000000   ........           CALL    ?PROLOGUE3_L09
   \   00000004   2F80               MOV     R24, R16
   \   00000006   2F91               MOV     R25, R17
   \   00000008   2FA2               MOV     R26, R18
     32              if(!settingsMode)
   \   0000000A   9100....           LDS     R16, settingsMode
   \   0000000E   2300               TST     R16
   \   00000010   F009               BREQ    $+2+2
   \   00000012   C05B               RJMP    ??Soft_0
     33              {
     34                  if(!eLEADZERO && Num1<10)   targetOut[0] = 10;
   \   00000014   ....               LDI     R20, LOW(eLEADZERO)
   \   00000016   ....               LDI     R21, (eLEADZERO) >> 8
   \   00000018   ........           CALL    __eeget8_16
   \   0000001C   2300               TST     R16
   \   0000001E   F431               BRNE    ??Soft_1
   \   00000020   308A               CPI     R24, 10
   \   00000022   F420               BRCC    ??Soft_1
   \   00000024   E00A               LDI     R16, 10
   \   00000026   9300....           STS     targetOut, R16
   \   0000002A   C006               RJMP    ??Soft_2
     35                  else                        targetOut[0] = Num1/10; 
   \                     ??Soft_1:
   \   0000002C   E04A               LDI     R20, 10
   \   0000002E   2F08               MOV     R16, R24
   \   00000030   ........           CALL    ?UC_DIVMOD_L01
   \   00000034   9300....           STS     targetOut, R16
     36                  
     37                  targetOut[1] = Num1 % 10;    
   \                     ??Soft_2:
   \   00000038   E04A               LDI     R20, 10
   \   0000003A   2F08               MOV     R16, R24
   \   0000003C   ........           CALL    ?UC_DIVMOD_L01
   \   00000040   9340....           STS     (targetOut + 1), R20
     38                  targetOut[2] = Num2 / 10;
   \   00000044   E04A               LDI     R20, 10
   \   00000046   2F09               MOV     R16, R25
   \   00000048   ........           CALL    ?UC_DIVMOD_L01
   \   0000004C   9300....           STS     (targetOut + 2), R16
     39                  targetOut[3] = Num2 % 10;    
   \   00000050   E04A               LDI     R20, 10
   \   00000052   2F09               MOV     R16, R25
   \   00000054   ........           CALL    ?UC_DIVMOD_L01
   \   00000058   9340....           STS     (targetOut + 3), R20
     40                  targetOut[4] = Num3 / 10;
   \   0000005C   E04A               LDI     R20, 10
   \   0000005E   2F0A               MOV     R16, R26
   \   00000060   ........           CALL    ?UC_DIVMOD_L01
   \   00000064   9300....           STS     (targetOut + 4), R16
     41                  targetOut[5] = Num3 % 10;
   \   00000068   E04A               LDI     R20, 10
   \   0000006A   2F0A               MOV     R16, R26
   \   0000006C   ........           CALL    ?UC_DIVMOD_L01
   \   00000070   9340....           STS     (targetOut + 5), R20
     42                  
     43                  for(uint8_t i=0; i<6; i++) 
   \   00000074   E020               LDI     R18, 0
   \   00000076   C00C               RJMP    ??Soft_3
     44                  {
     45                      if (targetOut[i] != out[i]) BitSet(changedDigit, i);
     46                      else                        BitReset(changedDigit, i);
   \                     ??Soft_4:
   \   00000078   2F42               MOV     R20, R18
   \   0000007A   E001               LDI     R16, 1
   \   0000007C   E010               LDI     R17, 0
   \   0000007E   ........           CALL    ?S_SHL_L02
   \   00000082   9500               COM     R16
   \   00000084   9110....           LDS     R17, changedDigit
   \   00000088   2310               AND     R17, R16
   \   0000008A   9310....           STS     changedDigit, R17
   \                     ??Soft_5:
   \   0000008E   9523               INC     R18
   \                     ??Soft_3:
   \   00000090   3026               CPI     R18, 6
   \   00000092   F4B8               BRCC    ??Soft_6
   \   00000094   E030               LDI     R19, 0
   \   00000096   01F9               MOVW    R31:R30, R19:R18
   \   00000098   ....               SUBI    R30, LOW((-(targetOut) & 0xFFFF))
   \   0000009A   ....               SBCI    R31, (-(targetOut) & 0xFFFF) >> 8
   \   0000009C   8100               LD      R16, Z
   \   0000009E   E030               LDI     R19, 0
   \   000000A0   01F9               MOVW    R31:R30, R19:R18
   \   000000A2   ....               SUBI    R30, LOW((-(`out`) & 0xFFFF))
   \   000000A4   ....               SBCI    R31, (-(`out`) & 0xFFFF) >> 8
   \   000000A6   8110               LD      R17, Z
   \   000000A8   1701               CP      R16, R17
   \   000000AA   F331               BREQ    ??Soft_4
   \   000000AC   2F42               MOV     R20, R18
   \   000000AE   E001               LDI     R16, 1
   \   000000B0   E010               LDI     R17, 0
   \   000000B2   ........           CALL    ?S_SHL_L02
   \   000000B6   9110....           LDS     R17, changedDigit
   \   000000BA   2B10               OR      R17, R16
   \   000000BC   9310....           STS     changedDigit, R17
   \   000000C0   CFE6               RJMP    ??Soft_5
     47                  }
     48                  
     49                  tranCounter = 0;
   \                     ??Soft_6:
   \   000000C2   E000               LDI     R16, 0
   \   000000C4   9300....           STS     tranCounter, R16
   \   000000C8   C003               RJMP    ??Soft_7
     50              }
     51              else
     52                  changedDigit = 0; 
   \                     ??Soft_0:
   \   000000CA   E000               LDI     R16, 0
   \   000000CC   9300....           STS     changedDigit, R16
     53          }
   \                     ??Soft_7:
   \   000000D0   E0E3               LDI     R30, 3
   \   000000D2   ........           JMP     ?EPILOGUE_B3_L09
     54            
     55          
     56          
     57          /*******************************************************************************
     58          * Function Name  : Sprint
     59          * Description    : Digits sprint effect
     60          * Input          : Three numbers to display
     61          *******************************************************************************/

   \                                 In  segment CODE, align 2, keep-with-next
     62          void Sprint(uint8_t D1, uint8_t D2, uint8_t D3)  
   \                     Sprint:
     63          {
   \   00000000   ........           CALL    ?PROLOGUE3_L09
   \   00000004   9726               SBIW    R29:R28, 6
   \   00000006   2FA0               MOV     R26, R16
   \   00000008   2F81               MOV     R24, R17
   \   0000000A   2F92               MOV     R25, R18
     64              ZeroBL();
   \   0000000C   ........           CALL    ZeroBL
     65              
     66              targetOut[0] = D1 / 10;    
   \   00000010   E04A               LDI     R20, 10
   \   00000012   2F0A               MOV     R16, R26
   \   00000014   ........           CALL    ?UC_DIVMOD_L01
   \   00000018   9300....           STS     targetOut, R16
     67              targetOut[1] = D1 % 10;
   \   0000001C   E04A               LDI     R20, 10
   \   0000001E   2F0A               MOV     R16, R26
   \   00000020   ........           CALL    ?UC_DIVMOD_L01
   \   00000024   9340....           STS     (targetOut + 1), R20
     68              targetOut[2] = D2 / 10;    
   \   00000028   E04A               LDI     R20, 10
   \   0000002A   2F08               MOV     R16, R24
   \   0000002C   ........           CALL    ?UC_DIVMOD_L01
   \   00000030   9300....           STS     (targetOut + 2), R16
     69              targetOut[3] = D2 % 10;
   \   00000034   E04A               LDI     R20, 10
   \   00000036   2F08               MOV     R16, R24
   \   00000038   ........           CALL    ?UC_DIVMOD_L01
   \   0000003C   9340....           STS     (targetOut + 3), R20
     70              targetOut[4] = D3 / 10;    
   \   00000040   E04A               LDI     R20, 10
   \   00000042   2F09               MOV     R16, R25
   \   00000044   ........           CALL    ?UC_DIVMOD_L01
   \   00000048   9300....           STS     (targetOut + 4), R16
     71              targetOut[5] = D3 % 10;
   \   0000004C   E04A               LDI     R20, 10
   \   0000004E   2F09               MOV     R16, R25
   \   00000050   ........           CALL    ?UC_DIVMOD_L01
   \   00000054   9340....           STS     (targetOut + 5), R20
     72          
     73              for(uint8_t i=0; i<6; i++) 
   \   00000058   E020               LDI     R18, 0
   \   0000005A   C04F               RJMP    ??Sprint_0
     74              {
     75                  uint8_t UPDOWN[6];
     76                  
     77                  if (targetOut[i] > out[i]) {UPDOWN[i] = 2; BitSet(changedDigit, i);} // новая больше
     78                  if (targetOut[i] < out[i]) {UPDOWN[i] = 3; BitSet(changedDigit, i);} // новая меньше
     79                  
     80                  for(uint8_t j=0; j<9; j++)
     81                  {
     82                      if(UPDOWN[i] == 2) 
     83                      {
     84                          if(out[i] != targetOut[i]) out[i]++;   // новая цифра больше, плюсуем
     85                      }
     86                      if(UPDOWN[i] == 3) 
     87                      {
     88                          if(out[i] != targetOut[i]) out[i]--;   // новая цифра меньше, вычитаем
     89                      }
     90                      
     91                      if(out[i] == targetOut[i]) break;          // новая цифра равна, возвращаемся в начало
     92                  
     93                      _delay_ms(50);
   \                     ??Sprint_1:
   \   0000005C   E34F               LDI     R20, 63
   \   0000005E   E05D               LDI     R21, 13
   \   00000060   E063               LDI     R22, 3
   \   00000062   5041               SUBI    R20, 1
   \   00000064   4050               SBCI    R21, 0
   \   00000066   4060               SBCI    R22, 0
   \   00000068   F7E1               BRNE    $-6
   \   0000006A   C000               RJMP    $+2
   \   0000006C   0000               NOP
   \   0000006E   9503               INC     R16
   \                     ??Sprint_2:
   \   00000070   3009               CPI     R16, 9
   \   00000072   F008               BRCS    $+2+2
   \   00000074   C041               RJMP    ??Sprint_3
   \   00000076   01FE               MOVW    R31:R30, R29:R28
   \   00000078   E030               LDI     R19, 0
   \   0000007A   0FE2               ADD     R30, R18
   \   0000007C   1FF3               ADC     R31, R19
   \   0000007E   8110               LD      R17, Z
   \   00000080   3012               CPI     R17, 2
   \   00000082   F499               BRNE    ??Sprint_4
   \   00000084   E030               LDI     R19, 0
   \   00000086   01F9               MOVW    R31:R30, R19:R18
   \   00000088   ....               SUBI    R30, LOW((-(`out`) & 0xFFFF))
   \   0000008A   ....               SBCI    R31, (-(`out`) & 0xFFFF) >> 8
   \   0000008C   8110               LD      R17, Z
   \   0000008E   E030               LDI     R19, 0
   \   00000090   01F9               MOVW    R31:R30, R19:R18
   \   00000092   ....               SUBI    R30, LOW((-(targetOut) & 0xFFFF))
   \   00000094   ....               SBCI    R31, (-(targetOut) & 0xFFFF) >> 8
   \   00000096   8130               LD      R19, Z
   \   00000098   1713               CP      R17, R19
   \   0000009A   F039               BREQ    ??Sprint_4
   \   0000009C   E030               LDI     R19, 0
   \   0000009E   01F9               MOVW    R31:R30, R19:R18
   \   000000A0   ....               SUBI    R30, LOW((-(`out`) & 0xFFFF))
   \   000000A2   ....               SBCI    R31, (-(`out`) & 0xFFFF) >> 8
   \   000000A4   8110               LD      R17, Z
   \   000000A6   9513               INC     R17
   \   000000A8   8310               ST      Z, R17
   \                     ??Sprint_4:
   \   000000AA   01FE               MOVW    R31:R30, R29:R28
   \   000000AC   E030               LDI     R19, 0
   \   000000AE   0FE2               ADD     R30, R18
   \   000000B0   1FF3               ADC     R31, R19
   \   000000B2   8110               LD      R17, Z
   \   000000B4   3013               CPI     R17, 3
   \   000000B6   F499               BRNE    ??Sprint_5
   \   000000B8   E030               LDI     R19, 0
   \   000000BA   01F9               MOVW    R31:R30, R19:R18
   \   000000BC   ....               SUBI    R30, LOW((-(`out`) & 0xFFFF))
   \   000000BE   ....               SBCI    R31, (-(`out`) & 0xFFFF) >> 8
   \   000000C0   8110               LD      R17, Z
   \   000000C2   E030               LDI     R19, 0
   \   000000C4   01F9               MOVW    R31:R30, R19:R18
   \   000000C6   ....               SUBI    R30, LOW((-(targetOut) & 0xFFFF))
   \   000000C8   ....               SBCI    R31, (-(targetOut) & 0xFFFF) >> 8
   \   000000CA   8130               LD      R19, Z
   \   000000CC   1713               CP      R17, R19
   \   000000CE   F039               BREQ    ??Sprint_5
   \   000000D0   E030               LDI     R19, 0
   \   000000D2   01F9               MOVW    R31:R30, R19:R18
   \   000000D4   ....               SUBI    R30, LOW((-(`out`) & 0xFFFF))
   \   000000D6   ....               SBCI    R31, (-(`out`) & 0xFFFF) >> 8
   \   000000D8   8110               LD      R17, Z
   \   000000DA   951A               DEC     R17
   \   000000DC   8310               ST      Z, R17
   \                     ??Sprint_5:
   \   000000DE   E030               LDI     R19, 0
   \   000000E0   01F9               MOVW    R31:R30, R19:R18
   \   000000E2   ....               SUBI    R30, LOW((-(`out`) & 0xFFFF))
   \   000000E4   ....               SBCI    R31, (-(`out`) & 0xFFFF) >> 8
   \   000000E6   8110               LD      R17, Z
   \   000000E8   E030               LDI     R19, 0
   \   000000EA   01F9               MOVW    R31:R30, R19:R18
   \   000000EC   ....               SUBI    R30, LOW((-(targetOut) & 0xFFFF))
   \   000000EE   ....               SBCI    R31, (-(targetOut) & 0xFFFF) >> 8
   \   000000F0   8130               LD      R19, Z
   \   000000F2   1713               CP      R17, R19
   \   000000F4   F009               BREQ    $+2+2
   \   000000F6   CFB2               RJMP    ??Sprint_1
     94                  }
   \                     ??Sprint_3:
   \   000000F8   9523               INC     R18
   \                     ??Sprint_0:
   \   000000FA   3026               CPI     R18, 6
   \   000000FC   F5D0               BRCC    ??Sprint_6
   \   000000FE   E030               LDI     R19, 0
   \   00000100   01F9               MOVW    R31:R30, R19:R18
   \   00000102   ....               SUBI    R30, LOW((-(`out`) & 0xFFFF))
   \   00000104   ....               SBCI    R31, (-(`out`) & 0xFFFF) >> 8
   \   00000106   8100               LD      R16, Z
   \   00000108   E030               LDI     R19, 0
   \   0000010A   01F9               MOVW    R31:R30, R19:R18
   \   0000010C   ....               SUBI    R30, LOW((-(targetOut) & 0xFFFF))
   \   0000010E   ....               SBCI    R31, (-(targetOut) & 0xFFFF) >> 8
   \   00000110   8110               LD      R17, Z
   \   00000112   1701               CP      R16, R17
   \   00000114   F480               BRCC    ??Sprint_7
   \   00000116   E002               LDI     R16, 2
   \   00000118   01FE               MOVW    R31:R30, R29:R28
   \   0000011A   E030               LDI     R19, 0
   \   0000011C   0FE2               ADD     R30, R18
   \   0000011E   1FF3               ADC     R31, R19
   \   00000120   8300               ST      Z, R16
   \   00000122   2F42               MOV     R20, R18
   \   00000124   E001               LDI     R16, 1
   \   00000126   E010               LDI     R17, 0
   \   00000128   ........           CALL    ?S_SHL_L02
   \   0000012C   9110....           LDS     R17, changedDigit
   \   00000130   2B10               OR      R17, R16
   \   00000132   9310....           STS     changedDigit, R17
   \                     ??Sprint_7:
   \   00000136   E030               LDI     R19, 0
   \   00000138   01F9               MOVW    R31:R30, R19:R18
   \   0000013A   ....               SUBI    R30, LOW((-(targetOut) & 0xFFFF))
   \   0000013C   ....               SBCI    R31, (-(targetOut) & 0xFFFF) >> 8
   \   0000013E   8100               LD      R16, Z
   \   00000140   E030               LDI     R19, 0
   \   00000142   01F9               MOVW    R31:R30, R19:R18
   \   00000144   ....               SUBI    R30, LOW((-(`out`) & 0xFFFF))
   \   00000146   ....               SBCI    R31, (-(`out`) & 0xFFFF) >> 8
   \   00000148   8110               LD      R17, Z
   \   0000014A   1701               CP      R16, R17
   \   0000014C   F480               BRCC    ??Sprint_8
   \   0000014E   E003               LDI     R16, 3
   \   00000150   01FE               MOVW    R31:R30, R29:R28
   \   00000152   E030               LDI     R19, 0
   \   00000154   0FE2               ADD     R30, R18
   \   00000156   1FF3               ADC     R31, R19
   \   00000158   8300               ST      Z, R16
   \   0000015A   2F42               MOV     R20, R18
   \   0000015C   E001               LDI     R16, 1
   \   0000015E   E010               LDI     R17, 0
   \   00000160   ........           CALL    ?S_SHL_L02
   \   00000164   9110....           LDS     R17, changedDigit
   \   00000168   2B10               OR      R17, R16
   \   0000016A   9310....           STS     changedDigit, R17
   \                     ??Sprint_8:
   \   0000016E   E000               LDI     R16, 0
   \   00000170   CF7F               RJMP    ??Sprint_2
     95              }
     96          }
   \                     ??Sprint_6:
   \   00000172   9626               ADIW    R29:R28, 6
   \   00000174   E0E3               LDI     R30, 3
   \   00000176   ........           JMP     ?EPILOGUE_B3_L09
     97          
     98          
     99          /*******************************************************************************
    100          * Function Name  : ShiftLeft
    101          * Description    : Digits shift to left
    102          * Input          : Number to display
    103          *******************************************************************************/  

   \                                 In  segment CODE, align 2, keep-with-next
    104          void ShiftLeft(uint16_t number) 
   \                     ShiftLeft:
    105          {  
   \   00000000   ........           CALL    ?PROLOGUE4_L09
   \   00000004   01D8               MOVW    R27:R26, R17:R16
    106              ZeroBL();
   \   00000006   ........           CALL    ZeroBL
    107              
    108              for(uint8_t i=5; i>0; i--)   
   \   0000000A   E005               LDI     R16, 5
   \   0000000C   C026               RJMP    ??ShiftLeft_0
    109              {
    110                  __asm("cli");
   \                     ??ShiftLeft_1:
   \   0000000E   94F8               cli
    111                  out[0] = out[1];    
   \   00000010   9110....           LDS     R17, (`out` + 1)
   \   00000014   9310....           STS     `out`, R17
    112                  out[1] = out[2];
   \   00000018   9110....           LDS     R17, (`out` + 2)
   \   0000001C   9310....           STS     (`out` + 1), R17
    113                  out[2] = out[3];    
   \   00000020   9110....           LDS     R17, (`out` + 3)
   \   00000024   9310....           STS     (`out` + 2), R17
    114                  out[3] = out[4];
   \   00000028   9110....           LDS     R17, (`out` + 4)
   \   0000002C   9310....           STS     (`out` + 3), R17
    115                  out[4] = out[5];    
   \   00000030   9110....           LDS     R17, (`out` + 5)
   \   00000034   9310....           STS     (`out` + 4), R17
    116                  out[i] = BLANK;
   \   00000038   E02A               LDI     R18, 10
   \   0000003A   E010               LDI     R17, 0
   \   0000003C   01F8               MOVW    R31:R30, R17:R16
   \   0000003E   ....               SUBI    R30, LOW((-(`out`) & 0xFFFF))
   \   00000040   ....               SBCI    R31, (-(`out`) & 0xFFFF) >> 8
   \   00000042   8320               ST      Z, R18
    117                  __asm("sei");
   \   00000044   9478               sei
    118                  
    119                  _delay_ms(50);
   \   00000046   E34F               LDI     R20, 63
   \   00000048   E05D               LDI     R21, 13
   \   0000004A   E063               LDI     R22, 3
   \   0000004C   5041               SUBI    R20, 1
   \   0000004E   4050               SBCI    R21, 0
   \   00000050   4060               SBCI    R22, 0
   \   00000052   F7E1               BRNE    $-6
   \   00000054   C000               RJMP    $+2
   \   00000056   0000               NOP
    120              }
   \   00000058   950A               DEC     R16
   \                     ??ShiftLeft_0:
   \   0000005A   3001               CPI     R16, 1
   \   0000005C   F6C0               BRCC    ??ShiftLeft_1
    121          	
    122              out[0] = BLANK;
   \   0000005E   E00A               LDI     R16, 10
   \   00000060   9300....           STS     `out`, R16
    123          
    124              for(uint8_t i=0; i<=3; i++)  
   \   00000064   E080               LDI     R24, 0
   \   00000066   C04D               RJMP    ??ShiftLeft_2
    125              {
    126                  __asm("cli");
   \                     ??ShiftLeft_3:
   \   00000068   94F8               cli
    127                  out[5-i] = number/1000;   
   \   0000006A   EE48               LDI     R20, 232
   \   0000006C   E053               LDI     R21, 3
   \   0000006E   018D               MOVW    R17:R16, R27:R26
   \   00000070   ........           CALL    ?US_DIVMOD_L02
   \   00000074   2F20               MOV     R18, R16
   \   00000076   2F08               MOV     R16, R24
   \   00000078   E010               LDI     R17, 0
   \   0000007A   9511               NEG     R17
   \   0000007C   9501               NEG     R16
   \   0000007E   4010               SBCI    R17, 0
   \   00000080   01F8               MOVW    R31:R30, R17:R16
   \   00000082   ....               SUBI    R30, LOW((-(`out`) & 0xFFFF))
   \   00000084   ....               SBCI    R31, (-(`out`) & 0xFFFF) >> 8
   \   00000086   8325               STD     Z+5, R18
    128                  out[6-i] = number/100%10;
   \   00000088   E644               LDI     R20, 100
   \   0000008A   E050               LDI     R21, 0
   \   0000008C   018D               MOVW    R17:R16, R27:R26
   \   0000008E   ........           CALL    ?US_DIVMOD_L02
   \   00000092   E04A               LDI     R20, 10
   \   00000094   E050               LDI     R21, 0
   \   00000096   ........           CALL    ?US_DIVMOD_L02
   \   0000009A   2F08               MOV     R16, R24
   \   0000009C   E010               LDI     R17, 0
   \   0000009E   9511               NEG     R17
   \   000000A0   9501               NEG     R16
   \   000000A2   4010               SBCI    R17, 0
   \   000000A4   01F8               MOVW    R31:R30, R17:R16
   \   000000A6   ....               SUBI    R30, LOW((-(`out`) & 0xFFFF))
   \   000000A8   ....               SBCI    R31, (-(`out`) & 0xFFFF) >> 8
   \   000000AA   8346               STD     Z+6, R20
    129                  out[7-i] = number/10%10;    
   \   000000AC   E04A               LDI     R20, 10
   \   000000AE   E050               LDI     R21, 0
   \   000000B0   018D               MOVW    R17:R16, R27:R26
   \   000000B2   ........           CALL    ?US_DIVMOD_L02
   \   000000B6   E04A               LDI     R20, 10
   \   000000B8   E050               LDI     R21, 0
   \   000000BA   ........           CALL    ?US_DIVMOD_L02
   \   000000BE   2F08               MOV     R16, R24
   \   000000C0   E010               LDI     R17, 0
   \   000000C2   9511               NEG     R17
   \   000000C4   9501               NEG     R16
   \   000000C6   4010               SBCI    R17, 0
   \   000000C8   01F8               MOVW    R31:R30, R17:R16
   \   000000CA   ....               SUBI    R30, LOW((-(`out`) & 0xFFFF))
   \   000000CC   ....               SBCI    R31, (-(`out`) & 0xFFFF) >> 8
   \   000000CE   8347               STD     Z+7, R20
    130                  out[8-i] = number%10;
   \   000000D0   E04A               LDI     R20, 10
   \   000000D2   E050               LDI     R21, 0
   \   000000D4   018D               MOVW    R17:R16, R27:R26
   \   000000D6   ........           CALL    ?US_DIVMOD_L02
   \   000000DA   2F08               MOV     R16, R24
   \   000000DC   E010               LDI     R17, 0
   \   000000DE   9511               NEG     R17
   \   000000E0   9501               NEG     R16
   \   000000E2   4010               SBCI    R17, 0
   \   000000E4   01F8               MOVW    R31:R30, R17:R16
   \   000000E6   ....               SUBI    R30, LOW((-(`out`) & 0xFFFF))
   \   000000E8   ....               SBCI    R31, (-(`out`) & 0xFFFF) >> 8
   \   000000EA   8740               STD     Z+8, R20
    131                  __asm("sei");
   \   000000EC   9478               sei
    132                  
    133                  _delay_ms(50);      
   \   000000EE   E30F               LDI     R16, 63
   \   000000F0   E01D               LDI     R17, 13
   \   000000F2   E023               LDI     R18, 3
   \   000000F4   5001               SUBI    R16, 1
   \   000000F6   4010               SBCI    R17, 0
   \   000000F8   4020               SBCI    R18, 0
   \   000000FA   F7E1               BRNE    $-6
   \   000000FC   C000               RJMP    $+2
   \   000000FE   0000               NOP
    134              }
   \   00000100   9583               INC     R24
   \                     ??ShiftLeft_2:
   \   00000102   3084               CPI     R24, 4
   \   00000104   F408               BRCC    $+2+2
   \   00000106   CFB0               RJMP    ??ShiftLeft_3
    135                  
    136              _delay_ms(200);         
   \   00000108   EF0F               LDI     R16, 255
   \   0000010A   E314               LDI     R17, 52
   \   0000010C   E02C               LDI     R18, 12
   \   0000010E   5001               SUBI    R16, 1
   \   00000110   4010               SBCI    R17, 0
   \   00000112   4020               SBCI    R18, 0
   \   00000114   F7E1               BRNE    $-6
   \   00000116   C000               RJMP    $+2
   \   00000118   0000               NOP
    137          }
   \   0000011A   E0E4               LDI     R30, 4
   \   0000011C   ........           JMP     ?EPILOGUE_B4_L09
    138          
    139           
    140          /*******************************************************************************
    141          * Function Name  : ShiftRight
    142          * Description    : Digits shift to right 
    143          *******************************************************************************/  

   \                                 In  segment CODE, align 2, keep-with-next
    144          void ShiftRight() 
   \                     ShiftRight:
    145          {
   \   00000000   9723               SBIW    R29:R28, 3
    146              uint8_t H, M, S;
    147              
    148              ZeroBL();   
   \   00000002   ........           CALL    ZeroBL
    149              
    150              if(!out[0]) 
   \   00000006   9100....           LDS     R16, `out`
   \   0000000A   2300               TST     R16
   \   0000000C   F549               BRNE    ??ShiftRight_0
    151              {
    152                  //positive
    153                  for(uint8_t i = 0; i <= 5; i++) 
   \   0000000E   E000               LDI     R16, 0
   \                     ??ShiftRight_1:
   \   00000010   3006               CPI     R16, 6
   \   00000012   F008               BRCS    $+2+2
   \   00000014   C049               RJMP    ??ShiftRight_2
    154                  { 
    155                      out[5] = out[4];    
   \   00000016   9110....           LDS     R17, (`out` + 4)
   \   0000001A   9310....           STS     (`out` + 5), R17
    156                      out[4] = out[3];
   \   0000001E   9110....           LDS     R17, (`out` + 3)
   \   00000022   9310....           STS     (`out` + 4), R17
    157                      out[3] = out[2];    
   \   00000026   9110....           LDS     R17, (`out` + 2)
   \   0000002A   9310....           STS     (`out` + 3), R17
    158                      out[2] = out[1];
   \   0000002E   9110....           LDS     R17, (`out` + 1)
   \   00000032   9310....           STS     (`out` + 2), R17
    159                      out[1] = out[0];    
   \   00000036   9110....           LDS     R17, `out`
   \   0000003A   9310....           STS     (`out` + 1), R17
    160                      out[i] = BLANK;
   \   0000003E   E02A               LDI     R18, 10
   \   00000040   E010               LDI     R17, 0
   \   00000042   01F8               MOVW    R31:R30, R17:R16
   \   00000044   ....               SUBI    R30, LOW((-(`out`) & 0xFFFF))
   \   00000046   ....               SBCI    R31, (-(`out`) & 0xFFFF) >> 8
   \   00000048   8320               ST      Z, R18
    161                      
    162                      _delay_ms(50);
   \   0000004A   E34F               LDI     R20, 63
   \   0000004C   E05D               LDI     R21, 13
   \   0000004E   E063               LDI     R22, 3
   \   00000050   5041               SUBI    R20, 1
   \   00000052   4050               SBCI    R21, 0
   \   00000054   4060               SBCI    R22, 0
   \   00000056   F7E1               BRNE    $-6
   \   00000058   C000               RJMP    $+2
   \   0000005A   0000               NOP
    163                  }
   \   0000005C   9503               INC     R16
   \   0000005E   CFD8               RJMP    ??ShiftRight_1
    164              }
    165              else
    166              {
    167                  //negative
    168                  for(uint8_t i = 0; i <= 3; i++) 
   \                     ??ShiftRight_0:
   \   00000060   E000               LDI     R16, 0
   \   00000062   C020               RJMP    ??ShiftRight_3
    169                  {
    170                      out[5] = out[4];    
   \                     ??ShiftRight_4:
   \   00000064   9110....           LDS     R17, (`out` + 4)
   \   00000068   9310....           STS     (`out` + 5), R17
    171                      out[4] = out[3];
   \   0000006C   9110....           LDS     R17, (`out` + 3)
   \   00000070   9310....           STS     (`out` + 4), R17
    172                      out[3] = out[2];    
   \   00000074   9110....           LDS     R17, (`out` + 2)
   \   00000078   9310....           STS     (`out` + 3), R17
    173                      out[2] = out[1];
   \   0000007C   9110....           LDS     R17, (`out` + 1)
   \   00000080   9310....           STS     (`out` + 2), R17
    174                      out[i] = BLANK;
   \   00000084   E02A               LDI     R18, 10
   \   00000086   E010               LDI     R17, 0
   \   00000088   01F8               MOVW    R31:R30, R17:R16
   \   0000008A   ....               SUBI    R30, LOW((-(`out`) & 0xFFFF))
   \   0000008C   ....               SBCI    R31, (-(`out`) & 0xFFFF) >> 8
   \   0000008E   8320               ST      Z, R18
    175                      
    176                      _delay_ms(50);
   \   00000090   E34F               LDI     R20, 63
   \   00000092   E05D               LDI     R21, 13
   \   00000094   E063               LDI     R22, 3
   \   00000096   5041               SUBI    R20, 1
   \   00000098   4050               SBCI    R21, 0
   \   0000009A   4060               SBCI    R22, 0
   \   0000009C   F7E1               BRNE    $-6
   \   0000009E   C000               RJMP    $+2
   \   000000A0   0000               NOP
    177                  }
   \   000000A2   9503               INC     R16
   \                     ??ShiftRight_3:
   \   000000A4   3004               CPI     R16, 4
   \   000000A6   F2F0               BRCS    ??ShiftRight_4
    178              }
    179          
    180              DS1307GetTime(&H, &M, &S); 
   \                     ??ShiftRight_2:
   \   000000A8   01AE               MOVW    R21:R20, R29:R28
   \   000000AA   019E               MOVW    R19:R18, R29:R28
   \   000000AC   5F2F               SUBI    R18, 255
   \   000000AE   4F3F               SBCI    R19, 255
   \   000000B0   018E               MOVW    R17:R16, R29:R28
   \   000000B2   5F0E               SUBI    R16, 254
   \   000000B4   4F1F               SBCI    R17, 255
   \   000000B6   ........           CALL    DS1307GetTime
    181          
    182              targetOut[0] = H / 10;   
   \   000000BA   E04A               LDI     R20, 10
   \   000000BC   810A               LDD     R16, Y+2
   \   000000BE   ........           CALL    ?UC_DIVMOD_L01
   \   000000C2   9300....           STS     targetOut, R16
    183              targetOut[1] = H % 10;
   \   000000C6   E04A               LDI     R20, 10
   \   000000C8   810A               LDD     R16, Y+2
   \   000000CA   ........           CALL    ?UC_DIVMOD_L01
   \   000000CE   9340....           STS     (targetOut + 1), R20
    184              targetOut[2] = M / 10;   
   \   000000D2   E04A               LDI     R20, 10
   \   000000D4   8109               LDD     R16, Y+1
   \   000000D6   ........           CALL    ?UC_DIVMOD_L01
   \   000000DA   9300....           STS     (targetOut + 2), R16
    185              targetOut[3] = M % 10;
   \   000000DE   E04A               LDI     R20, 10
   \   000000E0   8109               LDD     R16, Y+1
   \   000000E2   ........           CALL    ?UC_DIVMOD_L01
   \   000000E6   9340....           STS     (targetOut + 3), R20
    186              targetOut[4] = S / 10;   
   \   000000EA   E04A               LDI     R20, 10
   \   000000EC   8108               LD      R16, Y
   \   000000EE   ........           CALL    ?UC_DIVMOD_L01
   \   000000F2   9300....           STS     (targetOut + 4), R16
    187              targetOut[5] = S % 10;
   \   000000F6   E04A               LDI     R20, 10
   \   000000F8   8108               LD      R16, Y
   \   000000FA   ........           CALL    ?UC_DIVMOD_L01
   \   000000FE   9340....           STS     (targetOut + 5), R20
    188          
    189              for(uint8_t i = 0; i <= 5; i++) 
   \   00000102   E020               LDI     R18, 0
   \   00000104   C029               RJMP    ??ShiftRight_5
    190              { 
    191                  out[5] = out[4];    
   \                     ??ShiftRight_6:
   \   00000106   9100....           LDS     R16, (`out` + 4)
   \   0000010A   9300....           STS     (`out` + 5), R16
    192                  out[4] = out[3];
   \   0000010E   9100....           LDS     R16, (`out` + 3)
   \   00000112   9300....           STS     (`out` + 4), R16
    193                  out[3] = out[2];    
   \   00000116   9100....           LDS     R16, (`out` + 2)
   \   0000011A   9300....           STS     (`out` + 3), R16
    194                  out[2] = out[1];
   \   0000011E   9100....           LDS     R16, (`out` + 1)
   \   00000122   9300....           STS     (`out` + 2), R16
    195                  out[1] = out[0];    
   \   00000126   9100....           LDS     R16, `out`
   \   0000012A   9300....           STS     (`out` + 1), R16
    196                  out[0] = targetOut[5-i];
   \   0000012E   2F02               MOV     R16, R18
   \   00000130   E010               LDI     R17, 0
   \   00000132   9511               NEG     R17
   \   00000134   9501               NEG     R16
   \   00000136   4010               SBCI    R17, 0
   \   00000138   01F8               MOVW    R31:R30, R17:R16
   \   0000013A   ....               SUBI    R30, LOW((-(targetOut) & 0xFFFF))
   \   0000013C   ....               SBCI    R31, (-(targetOut) & 0xFFFF) >> 8
   \   0000013E   8105               LDD     R16, Z+5
   \   00000140   9300....           STS     `out`, R16
    197                  
    198                  _delay_ms(50);
   \   00000144   E34F               LDI     R20, 63
   \   00000146   E05D               LDI     R21, 13
   \   00000148   E063               LDI     R22, 3
   \   0000014A   5041               SUBI    R20, 1
   \   0000014C   4050               SBCI    R21, 0
   \   0000014E   4060               SBCI    R22, 0
   \   00000150   F7E1               BRNE    $-6
   \   00000152   C000               RJMP    $+2
   \   00000154   0000               NOP
    199              }
   \   00000156   9523               INC     R18
   \                     ??ShiftRight_5:
   \   00000158   3026               CPI     R18, 6
   \   0000015A   F2A8               BRCS    ??ShiftRight_6
    200          }
   \   0000015C   9623               ADIW    R29:R28, 3
   \   0000015E   9508               RET

   Maximum stack usage in bytes:

     Function           CSTACK RSTACK
     --------           ------ ------
     ShiftLeft              4      4
       -> ZeroBL            4      2
     ShiftRight             3      4
       -> ZeroBL            3      2
       -> DS1307GetTime     3      2
     Soft                   3      4
     Sprint                 9      4
       -> ZeroBL            9      2


   Segment part sizes:

     Function/Label Bytes
     -------------- -----
     Soft            214
     Sprint          378
     ShiftLeft       288
     ShiftRight      352

 
 1 232 bytes in segment CODE
 
 1 232 bytes of CODE memory

Errors: none
Warnings: none
